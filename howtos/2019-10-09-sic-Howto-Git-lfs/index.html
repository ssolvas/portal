<!DOCTYPE html>
<html xml:lang="ca-ES" lang="ca-ES" xmlns="http://www.w3.org/1999/xhtml">
<head>

	<title>SIC. Utilitzar Git-lfs per a arxius grans</title>
		<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link rel="shortcut icon" type="image/x-icon" href="/img/favicon.ico" />
	<link href="/css/master.min.css" rel="stylesheet" type="text/css" />
	<link href="/css/canigo.css" rel="stylesheet" type="text/css" />
	<script src="/js/jquery.min.js" type="text/javascript"></script>

	<script>
		document.write("<meta name=\"titol\" content=\"SIC. Utilitzar Git-lfs per a arxius grans\" />");
		document.write("<meta name=\"description\" content=\"Howto per a configurar i utilitzar Git LFS que dóna suport a arxius grans al servei de custodia de codi\" />");
	</script>

	

</head>
<body class="single">
	<div class="contenidor unfixed">

				

		<header class="fons_header navbar navbar-default z-index-menu">
			<div class="container" role="menu">
				<div class="row clearfix menuNav">
					<div class="col-md-3 col-xs-3 column visible-xs coloca ">
						<button type="button" onclick="amunt();" title="Menu"
							class="navbar-toggle pull-left" data-toggle="collapse"
							data-target=".navbar-collapse">
							<span class="sr-only">Toggle navigation</span> <span
								class="icon-bar"></span> <span class="icon-bar"></span> <span
								class="icon-bar"></span>
						</button>
					</div>

					<div class="col-md-3 col-xs-6 col-offset-2 column visible-xs titol-mobil">
						
						<span class="white titol-mobil-destacat">canigo.ctti</span><span class="white">.gencat.cat</span>
					</div>

					<div class="col-md-3 col-xs-3 column visible-xs coloca1">
						<button onclick="amunt();" type="button" title="Cerca"
							class="ico_cerca " data-toggle="collapse" data-target=".dos">
						</button>
					</div>

				</div>

				<div class="collapse dos">
					<div class="shadowBox">
						<form class="navbar-form navbar-left primer" action="/cercador/" method="get"
 						onsubmit="location.href=this.action+'?q='+this.cerca_cap.value; return false;">
							<div class="form-group">
								<input type="search" class="form-control" name="q" id="cerca_cap"
									title="Cerca"
									placeholder="Cerca" />
								<button type="button" title="Neteja" class="btn btn-default"></button>
								<input type="submit" class="ocult" name="Cerca" value="Cerca" />
							</div>
						</form>
					</div>
				</div>	

				<nav class="collapse navbar-collapse navbar-ex1-collapse ">
				
					<div class="row">
						<div class="col-md-6 col-sm-4 column">
							<a class="img-responsive logo" title="Generalitat de Catalunya"
								href="https://ctti.gencat.cat/">gencat.cat</a>
							<button class="menu_tancar visible-xs collapsed"
								data-target=".navbar-collapse" data-toggle="collapse"
								title="Tancar"></button>
						</div>

						<div class="col-md-6 col-sm-8 column hidden-xs hidden-mg">
							<form class="navbar-form cercador_vermell hidden-xs pull-right" action="/cercador/"  method="get" onsubmit="location.href=this.action+'?q='+this.cerca2.value; return false;">
								<div class="form-group">
									<label class="hidden" for="cerca2">Cerca</label>
									<input id="cerca2" class="form-control" type="search" 
									placeholder="Cerca" name="q" title="Cerca">
									<input class="btn btn-default" type="submit" title="Cerca" value="">
								</div>
							</form>

							

						</div>

					</div>
					<div class="col-xs-12 hidden-xs" id="nomPortal">
                    	<span class="titol-cap-nou">Centre de Telecomunicacions i Tecnologies de la Informació</span>
                    </div>					
					<ul class="nav navbar-nav">

			        	

						<li>
							<a class="dropdown-toggle" href='/' data-toggle='_dropdown'>Inici</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/arqctti' data-toggle='_dropdown'>Arquitectura CTTI</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/blog' data-toggle='_dropdown'>Blog</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/cloud' data-toggle='_dropdown'>Cloud</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/canigo' data-toggle='_dropdown'>Canigó</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/sic' data-toggle='_dropdown'>SIC</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/sgde' data-toggle='_dropdown'>SGDE</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/gicar' data-toggle='_dropdown'>GICAR</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/cs' data-toggle='_dropdown'>Centres de Suport</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/dadesref' data-toggle='_dropdown'>Gestió Tècnica de Dades</a>
						</li>

						

					</ul>

				</nav>
			</div>
		</header>



	</div>

	<section class="border-start">

						
			

			<article class="bgGrey">
				<div class="container">
					<div class="row">
						<div class="capcelera_basica col-sm-12">
							<div class="capcelera_basica_cont">
								<ol class="breadcrumb filariana hidden-xs">
									<li>
										<a href="/">Inici</a>
									</li>
									<li class="breadcrumbs2">
									
										<a href="/howtos">
											











	How to


















										</a>
										




























































































									
									</li>

								</ol>

								<h1 class="capcelera_flotant pull-left" data-txt=".title">
									

										
											




	SIC. Utilitzar Git-lfs per a arxius grans


										

									
								</h1>

								

								
								

								

								

							</div>
						</div>

					</div>
				</div>
			</article>

			


		   <div class="padding-xs container">
	    	
	    	   <i><b>Darrera actualització:</b></i> 29-11-2019
	        
           </div>
           
			<article class="padding-xs padding-sm padding-md contingut">				
				<div class="container">
 		
					
				

	


					

						

<h2 id="introducció">Introducció</h2>

<p>Tot i que Git és ben conegut com a sistema de control de versions, l&rsquo;ús de Git LFS (emmagatzematge d&rsquo;arxius grans) sovint és desconegut per als usuaris de Git. Aquest how-to va dirigit a tots aquells perfils tècnics que necessitin fer ús de l&rsquo;extensió Git LFS per a poder incloure arxius al servei de custòdia de codi (Gitlab) que superin la limitació de 25 MB.</p>

<p>Git LFS és un projecte de codi obert, és una extensió de Git i el seu objectiu és treballar de manera més eficient amb arxius grans i arxius binaris en el repositori, donat que:</p>

<ul>
<li>Els arxius grans faran <strong>créixer l&rsquo;historial</strong> del repositori cada cop que s&rsquo;actualitzin.</li>
<li>Els arxius grans faran que les <strong>operacions sobre el projecte s&rsquo;alenteixin</strong>.</li>
<li>Git considerarà una <strong>actualització d&rsquo;un arxiu binari com un canvi complet de l&rsquo;arxiu</strong>, per la qual cosa no només s&rsquo;emmagatzemaran les diferències i, si es fan canvis freqüents, el repositori anirà creixent de mida i les comandes Git cada cop seran més lentes.</li>
</ul>

<p>Git LFS utilitza punters en lloc d&rsquo;arxius reals quan els arxius (o tipus d&rsquo;arxius) es troben marcats com a arxius LFS, per tant, si disposa d&rsquo;arxius grans en el seu repositori i/o molts binaris, és recomanable usar Git LFS.</p>

<h2 id="com-dur-a-terme-la-instal-lació">Com dur a terme la instal·lació</h2>

<p>Per a utilitzar Git LFS dins d&rsquo;un projecte cal que <strong>tots els col·laboradors instal·lin l&rsquo;extensió</strong> en el lloc de treball, ja que com s’ha comentat, és una extensió de Git i, per tant, cal instal·lar-la per separat. En els següents enllaços trobareu les instruccions d&rsquo;instal·lació en funció del sistema operatiu del qual es disposi:</p>

<ul>
<li><a href="https://github.com/git-lfs/git-lfs/wiki/Installation#windows">Instal·lació Windows</a></li>
<li><a href="https://github.com/git-lfs/git-lfs/wiki/Installation#debian-and-ubuntu">Instal·lació Linux</a></li>
</ul>

<p>Un cop instal·lat, en qualsevol projecte podrem indicar les extensions dels fitxers que cal incloure en el Git LFS mitjançant la següent comanda executada a l&rsquo;arrel del projecte:</p>

<pre><code>git lfs track &quot;*.iso&quot;
</code></pre>

<p>Aquesta instrucció s&rsquo;encarregarà de generar un fitxer <strong>.gitattributes</strong> que haurem d&rsquo;incloure en el nostre projecte Git:</p>

<p><img src="/related/sic/git-lfs.png" alt="Git-lfs" />
<br/></p>

<p>Es recomana confirmar i enviar aquest arxiu al repositori perquè tots els desenvolupadors treballin amb la mateixa configuració de Git LFS.</p>

<h2 id="com-funciona">Com funciona</h2>

<p>Un cop instal·lat el component i indicades les extensions dels fitxers afectades, en endavant tots els fitxers amb les extensions indicades (.iso en l’exemple) es pujaran automàticament al Git LFS del servidor evitant les restriccions de mida.</p>

<p>Git LFS <strong>accepta expressions regulars</strong> semblants a les que podem trobar en el fitxer .gitignore, per tant el <em>tracking</em> pot ser tant d&rsquo;un fitxer com de grups de fitxers per extensió o altres configuracions que siguin necessàries.</p>

<p>Quan s&rsquo;extrau un arxiu Git LFS al repositori local, l&rsquo;arxiu s&rsquo;envia a través d&rsquo;un filtre que reemplaçarà el punter per l&rsquo;arxiu real.
L&rsquo;extensió Git LFS permet integrar <strong>fitxers d&rsquo;àudio, de vídeo i gràfics</strong> en el nostre codi font sense incrementar la mida del repositori central i evitant possibles problemes de rendiment en el servidor.</p>

<p>Per a conèixer el seu <strong>funcionament en detall i les comandes que cal utilitzar</strong> haureu de consultar la documentació oficial a la Web de <a href="https://docs.gitlab.com/ee/workflow/lfs/manage_large_binaries_with_git_lfs.html">Git LFS</a>.</p>

<h2 id="consells">Consells</h2>

<ul>
<li>La <strong>caché local de Git LFS no es netejarà automàticament</strong> pel que, de forma regular, cal executar la següent comanda:
<code>
git lfs prune
</code></li>
<li>Asseguri’s que <strong>tots els desenvolupadors tinguin instal·lat Git LFS</strong> doncs, si algú sense l’extensió confirma un arxiu que hauria d’estar associat amb Git LFS, obtindrà errors estranys que, tot i que són esmenables, millor evitar-los.</li>
<li>Abans de decidir assignar binaris a un repositori Git cal pensar en si <strong>realment és necessari</strong> fer control de versions i si existeix alguna alternativa basada en text.</li>
</ul>


					

					
				</div>	

			</article>	


	</section>	

		<div class="fons_footer ">
		<footer class="container center-block shadowBox2">
			<div class="shadow2"></div>
			<div class="row footer_tab_ord">

				<div class="footer_tab_bot col-sm-12">
					<div class="avis_legal">

						<div id="fAvisLegal">
							<div>
								<div class="hidden-xs">
									<a href="https://www.gencat.cat"> <img
										src="/img/logo_generalitat_gris.png_679097835.png"
										width="101" height="27" alt="www.gencat.cat"
										/></a>
									<p>
										<a title="Avis legal" href="https://web.gencat.cat/ca/menu-ajuda/ajuda/avis_legal/" target="_self">Avís legal</a>: La &copy; Generalitat de Catalunya permet la reutilització dels continguts i de les dades sempre que se citi la font i la data d'actualització, que no es desnaturalitzi la informació i que no es contradigui amb una llicència específica.
									</p>
								</div>
								<div class="visible-xs avis_legal">
									<p>
										<a title="Avis legal" href="https://web.gencat.cat/ca/menu-ajuda/ajuda/avis_legal/" target="_self">Avís legal</a>: La &copy; Generalitat de Catalunya permet la reutilització dels continguts i de les dades sempre que se citi la font i la data d'actualització, que no es desnaturalitzi la informació i que no es contradigui amb una llicència específica.
									</p>
								</div>
								
								<div class="fi_peu visible-xs">
									<a title="www.gencat.cat" href="https://www.gencat.cat"> <img
										src="/img/logo_generalitat_gris.png_679097835.png"
										width="101" height="27" 
										alt="www.gencat.cat" /></a> <a class="torna_amunt pull-right"
										href=" javascript:tornarAmunt();" title="Torna amunt">
										<p>Torna amunt</p>
									</a>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</footer>
	</div>

<script src="/js/master.min.js" type="text/javascript"></script>
<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.min.js"></script>
<script src="/js/custom.js" type="text/javascript"></script>



<script type="text/javascript">

if(location.hostname!=="localhost"){

	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', "UA-59408075-1", 'auto');
	ga('send', 'pageview', {
	  	'page': location.pathname + location.search  + location.hash
	  }
	);

}

</script>




</body>
</html>
