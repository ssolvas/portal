<!DOCTYPE html>
<html xml:lang="ca-ES" lang="ca-ES" xmlns="http://www.w3.org/1999/xhtml">
<head>

	<title>SIC 3.0 i procés de transició</title>
		<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link rel="shortcut icon" type="image/x-icon" href="/img/favicon.ico" />
	<link href="/css/master.min.css" rel="stylesheet" type="text/css" />
	<link href="/css/canigo.css" rel="stylesheet" type="text/css" />
	<script src="/js/jquery.min.js" type="text/javascript"></script>

	<script>
		document.write("<meta name=\"titol\" content=\"SIC 3.0 i procés de transició\" />");
		document.write("<meta name=\"description\" content=\"Nova Plataforma SIC 3.0 i procés de transició previst\" />");
	</script>

	

</head>
<body class="single">
	<div class="contenidor unfixed">

				

		<header class="fons_header navbar navbar-default z-index-menu">
			<div class="container" role="menu">
				<div class="row clearfix menuNav">
					<div class="col-md-3 col-xs-3 column visible-xs coloca ">
						<button type="button" onclick="amunt();" title="Menu"
							class="navbar-toggle pull-left" data-toggle="collapse"
							data-target=".navbar-collapse">
							<span class="sr-only">Toggle navigation</span> <span
								class="icon-bar"></span> <span class="icon-bar"></span> <span
								class="icon-bar"></span>
						</button>
					</div>

					<div class="col-md-3 col-xs-6 col-offset-2 column visible-xs titol-mobil">
						
						<span class="white titol-mobil-destacat">canigo.ctti</span><span class="white">.gencat.cat</span>
					</div>

					<div class="col-md-3 col-xs-3 column visible-xs coloca1">
						<button onclick="amunt();" type="button" title="Cerca"
							class="ico_cerca " data-toggle="collapse" data-target=".dos">
						</button>
					</div>

				</div>

				<div class="collapse dos">
					<div class="shadowBox">
						<form class="navbar-form navbar-left primer" action="/cercador/" method="get"
 						onsubmit="location.href=this.action+'?q='+this.cerca_cap.value; return false;">
							<div class="form-group">
								<input type="search" class="form-control" name="q" id="cerca_cap"
									title="Cerca"
									placeholder="Cerca" />
								<button type="button" title="Neteja" class="btn btn-default"></button>
								<input type="submit" class="ocult" name="Cerca" value="Cerca" />
							</div>
						</form>
					</div>
				</div>	

				<nav class="collapse navbar-collapse navbar-ex1-collapse ">
				
					<div class="row">
						<div class="col-md-6 col-sm-4 column">
							<a class="img-responsive logo" title="Generalitat de Catalunya"
								href="https://ctti.gencat.cat/">gencat.cat</a>
							<button class="menu_tancar visible-xs collapsed"
								data-target=".navbar-collapse" data-toggle="collapse"
								title="Tancar"></button>
						</div>

						<div class="col-md-6 col-sm-8 column hidden-xs hidden-mg">
							<form class="navbar-form cercador_vermell hidden-xs pull-right" action="/cercador/"  method="get" onsubmit="location.href=this.action+'?q='+this.cerca2.value; return false;">
								<div class="form-group">
									<label class="hidden" for="cerca2">Cerca</label>
									<input id="cerca2" class="form-control" type="search" 
									placeholder="Cerca" name="q" title="Cerca">
									<input class="btn btn-default" type="submit" title="Cerca" value="">
								</div>
							</form>

							

						</div>

					</div>
					<div class="col-xs-12 hidden-xs" id="nomPortal">
                    	<span class="titol-cap-nou">Centre de Telecomunicacions i Tecnologies de la Informació</span>
                    </div>					
					<ul class="nav navbar-nav">

			        	

						<li>
							<a class="dropdown-toggle" href='/' data-toggle='_dropdown'>Inici</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/arqctti' data-toggle='_dropdown'>Arquitectura CTTI</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/blog' data-toggle='_dropdown'>Blog</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/cloud' data-toggle='_dropdown'>Cloud</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/canigo' data-toggle='_dropdown'>Canigó</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/sic' data-toggle='_dropdown'>SIC</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/sgde' data-toggle='_dropdown'>SGDE</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/gicar' data-toggle='_dropdown'>GICAR</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/cs' data-toggle='_dropdown'>Centres de Suport</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/dadesref' data-toggle='_dropdown'>Gestió Tècnica de Dades</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/eventhub' data-toggle='_dropdown'>EventHub</a>
						</li>

						

					</ul>

				</nav>
			</div>
		</header>



	</div>

	<section class="border-start">

						
			

			<article class="bgGrey">
				<div class="container">
					<div class="row">
						<div class="capcelera_basica col-sm-12">
							<div class="capcelera_basica_cont">
								<ol class="breadcrumb filariana hidden-xs">
									<li>
										<a href="/">Inici</a>
									</li>
									<li class="breadcrumbs2">
									
										<a href="/drafts">
											




























										</a>
										




























































































									
									</li>

								</ol>

								<h1 class="capcelera_flotant pull-left" data-txt=".title">
									

										
											




	SIC 3.0 i procés de transició


										

									
								</h1>

								

								
								

								

								

							</div>
						</div>

					</div>
				</div>
			</article>

			


		   <div class="padding-xs container">
	    	
	    	   <i><b>Darrera actualització:</b></i> 25-11-2021
	        
           </div>
           
			<article class="padding-xs padding-sm padding-md contingut">				
				<div class="container">
 		
					
				

	

	<div class="row" id="TOC">
		<div class="col-md-12 col-xs-12"> 
			<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#introducció">Introducció</a></li>
<li><a href="#nova-solució">Nova solució</a></li>
<li><a href="#procés-de-transició">Procés de transició</a></li>
<li><a href="#principals-canvis-en-l-operativa">Principals canvis en l&rsquo;operativa</a></li>
<li><a href="#documentació-de-referència">Documentació de referència</a></li>
</ul></li>
</ul>
</nav>
    	</div>
	</div>

	


					

						

<h2 id="introducció">Introducció</h2>

<p><strong>Al maig del 2021 es va posar en servei la Nova Plataforma del Sistema d&rsquo;integració contínua v.3.0</strong>.
L’objectiu perseguit ha estat millorar el lliurament de solucions de TIC a la Generalitat emprant noves tecnologies,
eines i processos els quals permetin simplificar i lliurar solucions de més alt nivell amb una millor resiliència i
robustesa d&rsquo;una manera més àgil.</p>

<p>Durant una temporada, <strong>aquest nou sistema conviurà amb l&rsquo;actual SIC 2.0 de forma que, progressivament, s&rsquo;aniran transferint les tasques
de construcció i desplegament de les aplicacions</strong> cap al nou sistema. Aquest article pretén conèixer els principals canvis, com està prevista
la transició i quina és la documentació de referència a consultar en cada cas.</p>

<h2 id="nova-solució">Nova solució</h2>

<p>Els requeriments que ha pretès cobrir d&rsquo;aquest nou sistema són:</p>

<ul>
<li>Maximitzar l&rsquo;autoservei d&rsquo;infraestructures</li>
<li>Maximitzar l&rsquo;autonomia del lot d&rsquo;aplicacions</li>
<li>Maximitzar la mantenibilitat i escalabilitat de les pipelines</li>
<li>Maximitzar la mantenibilitat i robustesa de la Plataforma SIC</li>
<li>Maximitzar la visibilitat de l&rsquo;entorn per part de lot d&rsquo;aplicacions</li>
<li>Maximitzar l&rsquo;automatització de tasques</li>
<li>Desfer colls d’ampolla</li>
<li>Minimitzar els temps necessaris per posar una solució en servei</li>
<li>Minorar el cost dels futurs evolutius</li>
<li>Convergència desplegaments on-premise i cloud</li>
</ul>

<p>Per a assolir els objectius, s’han aplicat les següents decisions estratègiques:</p>

<ul>
<li><strong>Estandarditzar processos</strong>: en tenir processos estandarditzats i globals, es redueix el manteniment alhora
que resulta més fàcil capacitar nous recursos.</li>
<li><strong>Millorar el servei</strong>: major robustesa, disponibilitat i resiliència resulten en una major qualitat i un
menor temps de time-to-market.</li>
<li><strong>Servei sostenible</strong>: utilitzant el potencial de cloud s&rsquo;aconsegueix que els costos operatius del servei siguin sostenibles.</li>
<li><strong>Automatització</strong>: minimitzant recursos de servei i reemplaçant-los per automatització s&rsquo;aconsegueix redirigir
els recursos cap a l&rsquo;evolució constant.</li>
</ul>

<p>La nova solució es compon dels següents components:</p>

<ul>
<li><strong>Nova plataforma CI/CD</strong> basada en contenidors</li>
<li><strong>Ampliació del catàleg d&rsquo;imatges</strong>, tant per a la construcció de les aplicacions com per als desplegaments</li>
<li><strong>Nou Autoservei de Pipelines</strong> basat en fitxers de configuració en format YML</li>
<li><strong>Nou model de pipelines</strong> úniques (dinàmiques) per tipus d&rsquo;operació</li>
</ul>

<h2 id="procés-de-transició">Procés de transició</h2>

<p>Progressivament, i a mesura que la nova Plataforma SIC 3.0 doni cobertura a les necessitats, els usuaris passaran a fer ús de la nova
versió i el SIC 2.0 anirà caient en desús fins que es pugui donar de baixa definitivament.</p>

<p>En aquest sentit, la situació actual (que és viva i s’anirà actualitzant) i els calendaris provisionals són els següents:</p>

<table>
<thead>
<tr>
<th>Data</th>
<th>Abast SIC 3.0</th>
</tr>
</thead>

<tbody>
<tr>
<td><strong>05-2021</strong></td>
<td><strong>Noves</strong> pipelines <strong>cloud</strong></td>
</tr>

<tr>
<td><strong>07-2021</strong></td>
<td><strong>Totes</strong> les pipelines <strong>cloud</strong></td>
</tr>

<tr>
<td><strong>10-2021</strong></td>
<td><strong>Noves</strong> pipelines <strong>on-premise</strong> amb desplegament delegat i semiautomàtic (<strong>excepte .NET Framework</strong>)</td>
</tr>

<tr>
<td>Pendent planificar</td>
<td><strong>Noves</strong> pipelines <strong>on-premise</strong> amb desplegament delegat i semiautomàtic</td>
</tr>

<tr>
<td>Pendent planificar</td>
<td><strong>Totes</strong> les pipelines <strong>on-premise</strong> amb desplegament delegat i semiautomàtic</td>
</tr>

<tr>
<td>Pendent planificar</td>
<td><strong>Baixa SIC 2.0</strong></td>
</tr>
</tbody>
</table>

<h2 id="principals-canvis-en-l-operativa">Principals canvis en l&rsquo;operativa</h2>

<p>A continuació es descriuen els principals canvis que cal que l’usuari tingui presents de cara a la preparació dels projectes
i al funcionament de les noves pipelines de desplegament:</p>

<ul>
<li><p>El proveïdor d’aplicacions passa a disposar d’<strong>autonomia en la configuració de les seves pipelines de construcció i
desplegament al cloud</strong> mitjançant el <code>fitxer ACA</code> en format YML. Aquesta autonomia que s’adquireix implica també la responsabilitat
de fer una correcta configuració, incloent-hi l&rsquo;assignació adequat de recursos, temps d&rsquo;espera (<em>timeouts</em>) i altres aspectes.</p></li>

<li><p>Ha canviat l&rsquo;<strong>estructura d&rsquo;etapes</strong> (o <em>stages</em>) de les pipelines de desplegament per a donar cobertura als requeriments presents i futurs, i
l&rsquo;arquitectura que hi ha al darrere és completament diferent, per la qual cosa no són comparables les tasques que es realitzen ni els
temps que s&rsquo;hi destinen.</p></li>

<li><p>Les pipelines <strong>no s&rsquo;executen automàticament en fer un commit al repositori</strong> de codi font. Cal, per tant, que l&rsquo;usuari executi la pipeline de
desplegament mitjançant l&rsquo;opció <em>Build with Parameters</em>.</p></li>

<li><p>Les pipelines passen a <strong>executar-se en contenidors</strong> en lloc d&rsquo;en una màquina virtual, per la qual cosa cal fer una correcta assignació
de recursos de màquina (cpu i memòria) perquè el contenidor pugui dur a terme la tasca requerida. Cal tenir present que cada etapa de la pipeline aixeca un contenidor,
cosa que implica que el temps destinat per les diferents etapes es vegi incrementat en aproximadament 1 minut.</p></li>

<li><p>Relacionat amb el punt anterior, perquè es pugui realitzar la compilació amb la memòria assignada, és possible que en determinats casos
calgui <strong>limitar el consum de memòria de la comanda de compilació de Node</strong> mitjançant el flag &ndash;max-old-space-size adequat a la memòria màxima del contenidor.</p></li>

<li><p>Es defineix el <strong>temps d&rsquo;espera</strong> (DEPLOYMENT_WAIT/JOB_WAIT) aplicable al desplegament, que caldrà ajustar a les necessitats de l&rsquo;aplicació.</p></li>

<li><p>El <strong>fitxer <code>sic/sic.yml</code></strong>, que fins ara proporcionava la versió de l’aplicació, ha quedat absorbit pel fitxer <code>sic/aca.yml</code>. No
obstant això, si aquest fitxer es trobava automatitzat per l&rsquo;aplicació i, per tant, es generava en temps de construcció assignant-li la versió de
l’aplicació de forma automàtica, es podrà mantenir en el projecte evitant, simplement, indicar la propietat homòloga <code>info.version</code>.</p></li>

<li><p>Les <strong>llibreries es publiquen al repositori de llibreries segons la versió indicada al fitxer en format YML</strong> (vegeu punt anterior),
per la qual cosa és important assegurar que la versió indicada estigui alineada amb la versió del component.</p></li>

<li><p>El comportament de les pipelines es configura en fitxers YML, per la qual cosa hi ha informació que se sol·licitava com a paràmetres d&rsquo;entrada
que <strong>passa a sol·licitar-se en temps d&rsquo;execució</strong> mitjançant punts de parada a les pipelines (entorn, tag&hellip; segons pertoqui al tipus d&rsquo;operació).</p></li>

<li><p>La pipeline de desplegament <strong>no realitza l’enviament del codi font del projecte a l&rsquo;eina d&rsquo;anàlisi estàtic de codi de l&rsquo;Oficina de Qualitat</strong> ni comprova
les corresponents <a href="https://qualitat.solucions.gencat.cat/eines/sonarqube/">Quality Gates</a>.</p></li>

<li><p>La <strong>pipeline DEPLOY-TAG</strong> permetrà desplegar tags de la imatge de l&rsquo;aplicació que hagin arribat a Producció amb èxit.
Per tant, si no hi ha tags <code>x.y.z-PR</code> o <code>x.y.z-production</code> l&rsquo;execució retornarà un error del tipus &ldquo;No hi ha tags de producció disponibles&rdquo;.</p></li>

<li><p>Es proporciona una nova <strong>pipeline DEPLOY-ALL</strong> que permet fer un desplegament complet davant canvis en l’aplicació, orquestradors
i/o descriptors.</p></li>

<li><p>El sistema genera noves <strong>pipelines auxiliars DEPLOYER i CLEANER</strong> que s’encarreguen del desplegament de les
aplicacions i l’esborrat final de l’espai de treball (respectivament). Es tracta de pipelines que són invocades internament des
de totes les pipelines per a dur a terme tasques comunes.</p></li>

<li><p>Els <strong>punts d’aprovació de desplegament expiren en 30 dies</strong>.</p></li>

<li><p><strong>No es permeten execucions concurrents</strong> d’una mateixa pipeline. S&rsquo;haurà, per tant, de finalitzar l&rsquo;execució anterior abans d&rsquo;iniciar-ne la nova.</p></li>
</ul>

<h2 id="documentació-de-referència">Documentació de referència</h2>

<p>La documentació del Portal d&rsquo;Arquitectura s&rsquo;ha separat en <strong>dos blocs diferenciats: SIC 2.0 i SIC 3.0</strong>, amb la finalitat que
la documentació estigui ordenada, sigui clara, usable i no es perdi navegabilitat. No obstant això, cal tenir present que
la nova versió <strong>no implica de moment canvis en el funcionament dels serveis de custòdia de codi, de custòdia de binaris ni
en l&rsquo;autoservei d&rsquo;usuaris</strong>.</p>

<p>El plantejament és que els usuaris, segons la versió que estiguin utilitzant de la Plataforma CI/CD, puguin accedir
a tota la documentació relacionada.</p>

<p><br/><br/>
Si teniu qualsevol dubte o problema podeu revisar les <a href="/sic/faq"><strong>Preguntes Freqüents</strong></a> o utilitzar els canals de <a href="/sic/suport"><strong>Suport</strong></a>.</p>


					

					
				</div>	

			</article>	


	</section>	

		<div class="fons_footer ">
		<footer class="container center-block shadowBox2">
			<div class="shadow2"></div>
			<div class="row footer_tab_ord">

				<div class="footer_tab_bot col-sm-12">
					<div class="avis_legal">

						<div id="fAvisLegal">
							<div>
								<div class="hidden-xs">
									<a href="https://www.gencat.cat"> <img
										src="/img/logo_generalitat_gris.png_679097835.png"
										width="101" height="27" alt="www.gencat.cat"
										/></a>
									<p>
										<a title="Avis legal" href="https://web.gencat.cat/ca/menu-ajuda/ajuda/avis_legal/" target="_self">Avís legal</a>: La &copy; Generalitat de Catalunya permet la reutilització dels continguts i de les dades sempre que se citi la font i la data d'actualització, que no es desnaturalitzi la informació i que no es contradigui amb una llicència específica.
									</p>
								</div>
								<div class="visible-xs avis_legal">
									<p>
										<a title="Avis legal" href="https://web.gencat.cat/ca/menu-ajuda/ajuda/avis_legal/" target="_self">Avís legal</a>: La &copy; Generalitat de Catalunya permet la reutilització dels continguts i de les dades sempre que se citi la font i la data d'actualització, que no es desnaturalitzi la informació i que no es contradigui amb una llicència específica.
									</p>
								</div>
								
								<div class="fi_peu visible-xs">
									<a title="www.gencat.cat" href="https://www.gencat.cat"> <img
										src="/img/logo_generalitat_gris.png_679097835.png"
										width="101" height="27" 
										alt="www.gencat.cat" /></a> <a class="torna_amunt pull-right"
										href=" javascript:tornarAmunt();" title="Torna amunt">
										<p>Torna amunt</p>
									</a>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</footer>
	</div>

<script src="/js/master.min.js" type="text/javascript"></script>
<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.min.js"></script>
<script src="/js/custom.js" type="text/javascript"></script>



<script type="text/javascript">

if(location.hostname!=="localhost"){

	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', "UA-59408075-1", 'auto');
	ga('send', 'pageview', {
	  	'page': location.pathname + location.search  + location.hash
	  }
	);

}

</script>




</body>
</html>
