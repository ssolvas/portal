<!DOCTYPE html>
<html xml:lang="ca-ES" lang="ca-ES" xmlns="http://www.w3.org/1999/xhtml">
<head>

	<title>Arquitectura de Referència de Microserveis</title>
		<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link rel="shortcut icon" type="image/x-icon" href="/img/favicon.ico" />
	<link href="/css/master.min.css" rel="stylesheet" type="text/css" />
	<link href="/css/canigo.css" rel="stylesheet" type="text/css" />
	<script src="/js/jquery.min.js" type="text/javascript"></script>

	<script>
		document.write("<meta name=\"titol\" content=\"Arquitectura de Referència de Microserveis\" />");
		document.write("<meta name=\"description\" content=\"Arquitectura de referència orientada al desplegament d\x27aplicacions en microserveis i microfrontends.\" />");
	</script>

	

</head>
<body class="single">
	<div class="contenidor unfixed">

				

		<header class="fons_header navbar navbar-default z-index-menu">
			<div class="container" role="menu">
				<div class="row clearfix menuNav">
					<div class="col-md-3 col-xs-3 column visible-xs coloca ">
						<button type="button" onclick="amunt();" title="Menu"
							class="navbar-toggle pull-left" data-toggle="collapse"
							data-target=".navbar-collapse">
							<span class="sr-only">Toggle navigation</span> <span
								class="icon-bar"></span> <span class="icon-bar"></span> <span
								class="icon-bar"></span>
						</button>
					</div>

					<div class="col-md-3 col-xs-6 col-offset-2 column visible-xs titol-mobil">
						
						<span class="white titol-mobil-destacat">canigo.ctti</span><span class="white">.gencat.cat</span>
					</div>

					<div class="col-md-3 col-xs-3 column visible-xs coloca1">
						<button onclick="amunt();" type="button" title="Cerca"
							class="ico_cerca " data-toggle="collapse" data-target=".dos">
						</button>
					</div>

				</div>

				<div class="collapse dos">
					<div class="shadowBox">
						<form class="navbar-form navbar-left primer" action="/cercador/" method="get"
 						onsubmit="location.href=this.action+'?q='+this.cerca_cap.value; return false;">
							<div class="form-group">
								<input type="search" class="form-control" name="q" id="cerca_cap"
									title="Cerca"
									placeholder="Cerca" />
								<button type="button" title="Neteja" class="btn btn-default"></button>
								<input type="submit" class="ocult" name="Cerca" value="Cerca" />
							</div>
						</form>
					</div>
				</div>	

				<nav class="collapse navbar-collapse navbar-ex1-collapse ">
				
					<div class="row">
						<div class="col-md-6 col-sm-4 column">
							<a class="img-responsive logo" title="Generalitat de Catalunya"
								href="https://ctti.gencat.cat/">gencat.cat</a>
							<button class="menu_tancar visible-xs collapsed"
								data-target=".navbar-collapse" data-toggle="collapse"
								title="Tancar"></button>
						</div>

						<div class="col-md-6 col-sm-8 column hidden-xs hidden-mg">
							<form class="navbar-form cercador_vermell hidden-xs pull-right" action="/cercador/"  method="get" onsubmit="location.href=this.action+'?q='+this.cerca2.value; return false;">
								<div class="form-group">
									<label class="hidden" for="cerca2">Cerca</label>
									<input id="cerca2" class="form-control" type="search" 
									placeholder="Cerca" name="q" title="Cerca">
									<input class="btn btn-default" type="submit" title="Cerca" value="">
								</div>
							</form>

							

						</div>

					</div>
					<div class="col-xs-12 hidden-xs" id="nomPortal">
                    	<span class="titol-cap-nou">Centre de Telecomunicacions i Tecnologies de la Informació</span>
                    </div>					
					<ul class="nav navbar-nav">

			        	

						<li>
							<a class="dropdown-toggle" href='/' data-toggle='_dropdown'>Inici</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/arqctti' data-toggle='_dropdown'>Arquitectura CTTI</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/blog' data-toggle='_dropdown'>Blog</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/cloud' data-toggle='_dropdown'>Cloud</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/canigo' data-toggle='_dropdown'>Canigó</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/sic' data-toggle='_dropdown'>SIC</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/sgde' data-toggle='_dropdown'>SGDE</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/gicar' data-toggle='_dropdown'>GICAR</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/cs' data-toggle='_dropdown'>Centres de Suport</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/dadesref' data-toggle='_dropdown'>Gestió Tècnica de Dades</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/eventhub' data-toggle='_dropdown'>EventHub</a>
						</li>

						

					</ul>

				</nav>
			</div>
		</header>



	</div>

	<section class="border-start">

						
			

			<article class="bgGrey">
				<div class="container">
					<div class="row">
						<div class="capcelera_basica col-sm-12">
							<div class="capcelera_basica_cont">
								<ol class="breadcrumb filariana hidden-xs">
									<li>
										<a href="/">Inici</a>
									</li>
									<li class="breadcrumbs2">
									
										<a href="/drafts">
											




























										</a>
										




























































































									
									</li>

								</ol>

								<h1 class="capcelera_flotant pull-left" data-txt=".title">
									

										
											




	Arquitectura de Referència de Microserveis


										

									
								</h1>

								

								
								

								

								

							</div>
						</div>

					</div>
				</div>
			</article>

			


		   <div class="padding-xs container">
	    	
	    	   <i><b>Darrera actualització:</b></i> 01-05-2021
	        
           </div>
           
			<article class="padding-xs padding-sm padding-md contingut">				
				<div class="container">
 		
					
				

	


					

						

<h1 id="arquitectura-de-referència-de-microserveis">Arquitectura de referència de microserveis</h1>

<h2 id="introducció">Introducció</h2>

<p>Davant la ràpida evolució dels estils arquitecturals, s&rsquo;ha identificat la necessitat d’establir una arquitectura de referència per aquelles aplicacions que opten per arquitectures altament distribuïdes tant a nivell lògic com a nivell físic. L&rsquo;arquitectura presentada en aquesta pàgina s&rsquo;orienta al desplegament d&rsquo;aplicacions en microserveis i microfrontends de forma que un arquitecte la pugui usar com a punt de partida per a realitzar el disseny d&rsquo;una solució.</p>

<h3 id="conceptualització-de-l-arquitectura-de-referència">Conceptualització de l’arquitectura de referència</h3>

<p>L&rsquo;arquitectura de referència ha estat conceptualitzada en base a principis, criteris, models d&rsquo;ús i una metodologia de disseny de més abstracte a més detallat. En la il·lustració es mostren els conceptes treballats:</p>

<p><img src="/images/armicro/img1.png" alt="Motivacions" /></p>

<p>El primer punt a treballar han estat els  <strong>principis de l’arquitectura de referència.</strong> Aquests principis són els valors fonamentals que s’apliquen en l’arquitectura i que guien els models d’ús. Aquests s&rsquo;han explicitat en dos, el de disseny funcional i el de devops. El <strong>Model d’ús de disseny funcional</strong> proporciona guies i recomanacions per generar la vista funcional i informacional del disseny d’una solució, mentre que el <strong>Model d’ús de devops</strong> proporciona guies i recomanacions per realitzar la vista de desenvolupament i operació del disseny d’una solució. Un cop realitzats els models d&rsquo;ús, es creen els dissenys des del pla més abstracte - conceptual - fins el més detallat - físic. En primer lloc, el <strong>Disseny conceptual</strong> identifica els components de l’arquitectura de referència des d’un punt de vista tecnològicament neutre, definint quines capacitats aporten a l’arquitectura. A continuació, el <strong>Disseny lògic</strong> aporta una realització tecnològica del disseny conceptual i explicita les tecnologies possibles a usar per realitzar cadascun dels components definits, que poden tenir múltiples realitzacions tecnològiques diferents. L&rsquo;últim dels dissenys és el <strong>Disseny físic,</strong> que representa la implementació del disseny lògic sobre una arquitectura física concreta, per exemple, sobre on-premise, clouds públics, etc. De forma similar al cas anterior, un disseny lògic pot tenir vàries implementacions físiques, segons altres condicionants que pot tenir el sistema. Finalment, s&rsquo;ha considerat convenient afegir un conjunt de <strong>Criteris d’aplicabilitat,</strong> que permeten fer una discriminació inicial de quines solucions poden ser candidates a usar l’arquitectura de referència i, per tant, treure’n benefici de les seves qualitats.</p>

<h2 id="principis-de-l-arquitectura-de-referència">Principis de l’arquitectura de referència</h2>

<p>Els principis són els <strong>valors fonamentals</strong> que s’apliquen en l’arquitectura i que guien els models d’ús de disseny funcional i devops.</p>

<p><img src="/images/armicro/img4.png" alt="Principis" /></p>

<h2 id="models-d-ús-de-l-arquitectura">Models d’ús de l&rsquo;arquitectura</h2>

<h3 id="model-d-ús-del-disseny-funcional">Model d&rsquo;ús del disseny funcional</h3>

<p>L&rsquo;objectiu del disseny funcional és la <strong>distribució adequada del conjunt de funcionalitats de la solució en diferents blocs funcionals</strong>. Els principis bàsics que han de guiar la descomposició funcional són: L&rsquo;<strong>alta cohesió</strong> que per definició és que el codi que es modifica junt, que dona resposta a una funcionalitat concreta, ha d’estar arquitecturalment junt; i el <strong>baix acoblament</strong> que es produeix quan un bloc funcional està poc acoblat amb un altre, un canvi en un d&rsquo;ells no implica canviar l&rsquo;altre.</p>

<p><img src="/images/armicro/img4a.png" alt="DFuncional" /></p>

<h3 id="model-d-ús-de-devops">Model d&rsquo;ús de DevOps</h3>

<p>Per a cada bloc funcional el desenvolupament hauria de seguir un <strong>patró BFF (Backend for frontend)</strong> amb les següents condicions: a) S&rsquo;hauria de crear un únic projecte per a cada bloc funcional, que contindrà tant la part front com la part back, b) la part front només es comunica amb la seva part back, de manera que la part front està acoblada amb la seva part back, i c) si cal, cada bloc funcional hauria de disposar de la seva pròpia base de dades.</p>

<p><img src="/images/armicro/img4b.png" alt="Condicionants" /></p>

<p><em>(*) En el cas en què un microservei d&rsquo;un bloc funcional tingui requisits no funcionals particulars que diferencien o identifiquen dues o més parts diferenciades dins del microservei, es recomana dividir el microservei en diferents components (dins del mateix bloc funcional) per poder així aplicar la particularitat cadascun (p.e. escalat diferenciat).</em></p>

<h4 id="model-de-desplegament"><em>Model de desplegament</em></h4>

<p>La capa back del bloc funcional es desplega en un recurs dedicat i la capa front es desplega en un directori d&rsquo;un servei front global, que serveix les capes front de tots els blocs funcionals de l&rsquo;aplicació.</p>

<h4 id="model-d-operacions"><em>Model d’operacions</em></h4>

<p>El model d&rsquo;operacions ha de tenir en compte que en els <strong>serveis de monitorització, logging i observabilitat</strong> s&rsquo;han de crear dashboards independents per a cada bloc funcional. Tanmateix s&rsquo;ha de tenir en compte les plantilles per als <strong>serveis de gestió de configuració</strong> dels components dels que es compon un bloc funcional s&rsquo;emmagatzemen en el propi projecte. Els <strong>serveis de control</strong> per als blocs funcionals estan coberts per la pròpia infraestructura. I per millorar la disponibilitat i la resiliència dels blocs funcionals, en els serveis de control s&rsquo;haurien d&rsquo;implementar tant <strong>healthiness i readiness checks</strong> com el patró de <strong>circuit breaker</strong>.</p>

<h2 id="arquitectura-tècnica">Arquitectura tècnica</h2>

<h3 id="disseny-conceptual">Disseny conceptual</h3>

<p>El disseny conceptual identifica i descriu els seus components des d’un punt de vista neutre tecnològicament i s’ha dividit en els tres blocs: <strong>execució</strong>, <strong>operació</strong> i <strong>desenvolupament</strong>.</p>

<h4 id="arquitectura-d-execució"><em>Arquitectura d’execució</em></h4>

<p>Inclou els components necessaris per tal de poder executar els microserveis i microfrontends de la solució i que aquests interactuïn entre ells. El fet que l’arquitectura sigui altament distribuïda requereix l’existència de certs components que no són necessaris en arquitectures monolítiques. Aquests components són els que donen resposta als requeriments dels usuaris de negoci.</p>

<p><img src="/images/armicro/img15.png" alt="Condicionants" /></p>

<h4 id="arquitectura-d-operació"><em>Arquitectura d’operació</em></h4>

<p>Els components d’aquest bloc permeten que, un cop desplegada i en execució la solució, aquesta pugui ser supervisada i es pugui assegurar el seu nivell de servei. En arquitectures altament distribuïdes no és suficient una visió independent de cada artefacte de la solució sinó que calen visions agregades de monitorització, observabilitat, etc. Aquests components donen resposta als perfils d’operació de la solució.</p>

<p><img src="/images/armicro/img16.png" alt="Condicionants" /></p>

<h4 id="arquitectura-de-desenvolupament"><em>Arquitectura de desenvolupament</em></h4>

<p>Inclou els components per poder desenvolupar i desplegar els microfrontends i microserveis que composen la solució. Per treure màxim profit de l’arquitectura és necessari que els diferents artefactes de la solució tinguin un cicle de vida el més autònom possible. Aquests components donen servei als equips de desenvolupament de la solució.</p>

<p><img src="/images/armicro/img17.png" alt="Condicionants" /></p>

<h3 id="disseny-lògic-i-físic">Disseny lògic i físic</h3>

<p>El <strong>disseny lògic</strong> és una realització concreta del disseny conceptual especificant les tecnologies que poden resoldre cada servei i el <strong>disseny físic</strong> identifica i descriu els components que formen part o integren el sistema, i com aquests es configuren o interactuen.</p>

<h2 id="criteris-d-aplicabilitat">Criteris d’aplicabilitat</h2>

<p>L’ús de l’arquitectura aporta avantatges, especialment, relacionats amb la capacitat de lliurar canvis i evolucions de la solució més ràpidament als usuaris però també introdueix dificultats i complexitats que fan que la decisió sobre l’ús d’aquest tipus d’arquitectura sigui rellevant. És per aquest motiu que s’estableixen uns criteris d’aplicabilitat per ajudar a la presa de decisió sobre l’ús de l’arquitectura. Aquests criteris es divideixen en <strong>motivacions</strong> que poden fer que una arquitectura de microserveis pugui ser beneficiosa per a un sistema i <strong>condicionants</strong> que hauria de complir el sistema per a poder-la aplicar amb garanties d’èxit.</p>

<h3 id="motivacions">Motivacions</h3>

<p>Les motivacions serien aquelles circumstàncies o requeriments que impulsarien la decisió de crear una arquitectura basada en microserveis per a un sistema donat</p>

<p><img src="/images/armicro/img2.png" alt="Motivacions" /></p>

<h3 id="condicionants">Condicionants</h3>

<p>Per altra banda, l’ús d&rsquo;una arquitectura de microserveis també implica uns condicionants que es poden classificar en diferents aspectes: solució, procés de construcció, equip i infraestructura de desplegament.</p>

<p><img src="/images/armicro/img3.png" alt="Condicionants" /></p>

<h2 id="document-de-l-arquitectura-de-referència">Document de l&rsquo;Arquitectura de Referència</h2>

<p>El document complet en el qual es basa aquesta arquitectura de referència es pot descarregar com a fitxer PDF en <a href="/related/armicro/ArquitecturaReferenciaMicro_V1.0.pdf">&ldquo;Arquitectura de referència microserveis&rdquo;</a>.</p>

<h2 id="referències"><em>Referències</em></h2>

<ul>
<li><p>[AZ021] Microservices on Azure – What Is Microservices | Microsoft Azure [Internet]. [citat 18 març 2021]. Disponible a: <a href="https://azure.microsoft.com/en-us/solutions/microservice-applications/">https://azure.microsoft.com/en-us/solutions/microservice-applications/</a></p></li>

<li><p>[AZU21] Improving observability of your Kubernetes deployments with Azure Monitor for containers [Internet]. [citat 18 març 2021]. Disponible a: <a href="https://azure.microsoft.com/en-us/blog/improving-observability-of-your-kubernetes-deployments-with-azure-monitor-for-containers/">https://azure.microsoft.com/en-us/blog/improving-observability-of-your-kubernetes-deployments-with-azure-monitor-for-containers/</a></p></li>

<li><p>[BRA13] Brandolini A. Introducing Event Storming [Internet]. Ziobrando’s Lair. 2013 [citat 18 març 2021]. Disponible a: <a href="http://ziobrando.blogspot.com/2013/11/introducing-event-storming.html">http://ziobrando.blogspot.com/2013/11/introducing-event-storming.html</a></p></li>

<li><p>[CTT21] Principis d’arquitectura de sistemes d’informació [Internet]. [citat 18 març 2021]. Disponible a: <a href="https://canigo.ctti.gencat.cat/arqctti/principis_arq/">https://canigo.ctti.gencat.cat/arqctti/principis_arq/</a></p></li>

<li><p>[EVA03] Evans E. Domain-driven design: tackling complexity in the heart of software. Boston, MA: Addison-Wesley; 2003.</p></li>

<li><p>[HAR21] Harbor [Internet]. [citat 18 març 2021]. Disponible a: <a href="https://goharbor.io/">https://goharbor.io/</a></p></li>

<li><p>[HON21] The Microservices Observability Problem [Internet]. Honeycomb. [citat 18 març 2021]. Disponible a: <a href="https://www.honeycomb.io/microservices/">https://www.honeycomb.io/microservices/</a></p></li>

<li><p>[NEW15] Newman S. Building microservices: designing fine-grained systems. First Edition. Beijing Sebastopol, CA: O’Reilly Media; 2015. 259 p.</p></li>

<li><p>[VER13] Vernon V. Implementing domain-driven design. Upper Saddle River, NJ; Mexico City: Addison-Wesley; 2013.</p></li>

<li><p>[YOU79] Yourdon E, Constantine LL. Structured design: fundamentals of a discipline of computer program and systems design. Englewood Cliffs, N.J.: Yourdon Press; 1979.</p></li>
</ul>


					

					
				</div>	

			</article>	


	</section>	

		<div class="fons_footer ">
		<footer class="container center-block shadowBox2">
			<div class="shadow2"></div>
			<div class="row footer_tab_ord">

				<div class="footer_tab_bot col-sm-12">
					<div class="avis_legal">

						<div id="fAvisLegal">
							<div>
								<div class="hidden-xs">
									<a href="https://www.gencat.cat"> <img
										src="/img/logo_generalitat_gris.png_679097835.png"
										width="101" height="27" alt="www.gencat.cat"
										/></a>
									<p>
										<a title="Avis legal" href="https://web.gencat.cat/ca/menu-ajuda/ajuda/avis_legal/" target="_self">Avís legal</a>: La &copy; Generalitat de Catalunya permet la reutilització dels continguts i de les dades sempre que se citi la font i la data d'actualització, que no es desnaturalitzi la informació i que no es contradigui amb una llicència específica.
									</p>
								</div>
								<div class="visible-xs avis_legal">
									<p>
										<a title="Avis legal" href="https://web.gencat.cat/ca/menu-ajuda/ajuda/avis_legal/" target="_self">Avís legal</a>: La &copy; Generalitat de Catalunya permet la reutilització dels continguts i de les dades sempre que se citi la font i la data d'actualització, que no es desnaturalitzi la informació i que no es contradigui amb una llicència específica.
									</p>
								</div>
								
								<div class="fi_peu visible-xs">
									<a title="www.gencat.cat" href="https://www.gencat.cat"> <img
										src="/img/logo_generalitat_gris.png_679097835.png"
										width="101" height="27" 
										alt="www.gencat.cat" /></a> <a class="torna_amunt pull-right"
										href=" javascript:tornarAmunt();" title="Torna amunt">
										<p>Torna amunt</p>
									</a>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</footer>
	</div>

<script src="/js/master.min.js" type="text/javascript"></script>
<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.min.js"></script>
<script src="/js/custom.js" type="text/javascript"></script>



<script type="text/javascript">

if(location.hostname!=="localhost"){

	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', "UA-59408075-1", 'auto');
	ga('send', 'pageview', {
	  	'page': location.pathname + location.search  + location.hash
	  }
	);

}

</script>




</body>
</html>
