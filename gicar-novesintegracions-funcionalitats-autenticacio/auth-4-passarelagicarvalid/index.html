<!DOCTYPE html>
<html xml:lang="ca-ES" lang="ca-ES" xmlns="http://www.w3.org/1999/xhtml">
<head>

	<title>4.- Servei d&#39;autenticació hibrida GICAR - Vàlid (Passarel·la GICAR-Vàlid)</title>
		<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link rel="shortcut icon" type="image/x-icon" href="/img/favicon.ico" />
	<link href="/css/master.min.css" rel="stylesheet" type="text/css" />
	<link href="/css/canigo.css" rel="stylesheet" type="text/css" />
	<script src="/js/jquery.min.js" type="text/javascript"></script>

	<script>
		document.write("<meta name=\"titol\" content=\"4.- Servei d\x27autenticació hibrida GICAR - Vàlid (Passarel·la GICAR-Vàlid)\" />");
		document.write("<meta name=\"description\" content=\"Solució basada en SAML2 per a delegar l\x27autenticació de forma hibrida a GICAR i a Vàlid\" />");
	</script>

	

</head>
<body class="single">
	<div class="contenidor unfixed">

				

		<header class="fons_header navbar navbar-default z-index-menu">
			<div class="container" role="menu">
				<div class="row clearfix menuNav">
					<div class="col-md-3 col-xs-3 column visible-xs coloca ">
						<button type="button" onclick="amunt();" title="Menu"
							class="navbar-toggle pull-left" data-toggle="collapse"
							data-target=".navbar-collapse">
							<span class="sr-only">Toggle navigation</span> <span
								class="icon-bar"></span> <span class="icon-bar"></span> <span
								class="icon-bar"></span>
						</button>
					</div>

					<div class="col-md-3 col-xs-6 col-offset-2 column visible-xs titol-mobil">
						
						<span class="white titol-mobil-destacat">canigo.ctti</span><span class="white">.gencat.cat</span>
					</div>

					<div class="col-md-3 col-xs-3 column visible-xs coloca1">
						<button onclick="amunt();" type="button" title="Cerca"
							class="ico_cerca " data-toggle="collapse" data-target=".dos">
						</button>
					</div>

				</div>

				<div class="collapse dos">
					<div class="shadowBox">
						<form class="navbar-form navbar-left primer" action="/cercador/" method="get"
 						onsubmit="location.href=this.action+'?q='+this.cerca_cap.value; return false;">
							<div class="form-group">
								<input type="search" class="form-control" name="q" id="cerca_cap"
									title="Cerca"
									placeholder="Cerca" />
								<button type="button" title="Neteja" class="btn btn-default"></button>
								<input type="submit" class="ocult" name="Cerca" value="Cerca" />
							</div>
						</form>
					</div>
				</div>	

				<nav class="collapse navbar-collapse navbar-ex1-collapse ">
				
					<div class="row">
						<div class="col-md-6 col-sm-4 column">
							<a class="img-responsive logo" title="Generalitat de Catalunya"
								href="https://ctti.gencat.cat/">gencat.cat</a>
							<button class="menu_tancar visible-xs collapsed"
								data-target=".navbar-collapse" data-toggle="collapse"
								title="Tancar"></button>
						</div>

						<div class="col-md-6 col-sm-8 column hidden-xs hidden-mg">
							<form class="navbar-form cercador_vermell hidden-xs pull-right" action="/cercador/"  method="get" onsubmit="location.href=this.action+'?q='+this.cerca2.value; return false;">
								<div class="form-group">
									<label class="hidden" for="cerca2">Cerca</label>
									<input id="cerca2" class="form-control" type="search" 
									placeholder="Cerca" name="q" title="Cerca">
									<input class="btn btn-default" type="submit" title="Cerca" value="">
								</div>
							</form>

							

						</div>

					</div>
					<div class="col-xs-12 hidden-xs" id="nomPortal">
                    	<span class="titol-cap-nou">Centre de Telecomunicacions i Tecnologies de la Informació</span>
                    </div>					
					<ul class="nav navbar-nav">

			        	

						<li>
							<a class="dropdown-toggle" href='/' data-toggle='_dropdown'>Inici</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/arqctti' data-toggle='_dropdown'>Arquitectura CTTI</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/blog' data-toggle='_dropdown'>Blog</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/cloud' data-toggle='_dropdown'>Cloud</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/canigo' data-toggle='_dropdown'>Canigó</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/sic' data-toggle='_dropdown'>SIC</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/sgde' data-toggle='_dropdown'>SGDE</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/gicar' data-toggle='_dropdown'>GICAR</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/cs' data-toggle='_dropdown'>Centres de Suport</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/dadesref' data-toggle='_dropdown'>Gestió Tècnica de Dades</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/eventhub' data-toggle='_dropdown'>EventHub</a>
						</li>

						

					</ul>

				</nav>
			</div>
		</header>



	</div>

	<section class="border-start">

						
			

			<article class="bgGrey">
				<div class="container">
					<div class="row">
						<div class="capcelera_basica col-sm-12">
							<div class="capcelera_basica_cont">
								<ol class="breadcrumb filariana hidden-xs">
									<li>
										<a href="/">Inici</a>
									</li>
									<li class="breadcrumbs2">
									
										<a href="/gicar-novesintegracions-funcionalitats-autenticacio">
											




























										</a>
										



























































































	<a href="/gicar/">GICAR</a> </li>

	<li>
		<a href="/gicar-novesintegracions/">Modalitats d'integració possibles</a>
	</li>

	<li>
	
		<a href="/gicar-novesintegracions-funcionalitats-autenticacio/">
	

	Possibilitats funcionals d'integració amb GICAR

	
		</a>
	



									
									</li>

								</ol>

								<h1 class="capcelera_flotant pull-left" data-txt=".title">
									

										
											




	4.- Servei d&#39;autenticació hibrida GICAR - Vàlid (Passarel·la GICAR-Vàlid)


										

									
								</h1>

								

								
								

								

								

							</div>
						</div>

					</div>
				</div>
			</article>

			


		   <div class="padding-xs container">
	    	
	    	   <i><b>Darrera actualització:</b></i> 10-10-2018
	        
           </div>
           
			<article class="padding-xs padding-sm padding-md contingut">				
				<div class="container">
 		
					
				

	

	<div class="row" id="TOC">
		<div class="col-md-12 col-xs-12"> 
			<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#funcionament-de-la-solució">Funcionament de la solució:</a></li>
<li><a href="#implementació-tècnica-de-la-solució">Implementació tècnica de la solució:</a></li>
</ul></li>
</ul>
</nav>
    	</div>
	</div>

	


					

						

<p>Aquesta solució està pensada principalment per aplicacions que basen la seva font d’autenticació amb la solució GICAR, amb la qual cosa són aplicacions utilitzades per funcionaris, però que també són aplicacions utilitzades per ciutadans.</p>

<p>Fins ara, la única solució que donava GICAR per aquest tipus d’aplicacions era l’autenticació amb certificat digital.</p>

<p>A partir d’ara, a través d’aquesta nova passarel·la, també s’oferirà a aquestes aplicacions que ho sol·licitin, la integració amb el Vàlid del Consorci AOC (IdCatSMS), addicionalment a la integració amb GICAR.</p>

<p>Aquesta solució presenta els següents punts destacables:</p>

<ul>
<li><p><strong>Autenticació hibrida de GICAR + Vàlid per a les aplicacions</strong>. Amb aquesta passarel·la es compatibilitza l’autenticació de GICAR i la de Vàlid, permetent que les aplicacions puguin ser accedides amb un sistema d’autenticació o l’altre.</p></li>

<li><p><strong>No cal tocar codi de l’aplicació si ja està integrada amb GICAR</strong>. La passarel·la genera una mateixa resposta per part dels dos sistemes d’autenticació cap a les aplicacions. A partir d’ara no cal tocar el codi de les aplicacions per a poder-les autenticar contra Vàlid si aquesta ja està integrada amb GICAR. &ndash;&gt; Estalvi a nivell de desenvolupament per part del departament.</p></li>

<li><p><strong>Abstracció de la complexitat de Vàlid per part de les aplicacions</strong>. Encapsulament de tota la complexitat de les crides a Vàlid dins d’aquesta passarel·la, i l’aplicació només ha de recollir la resposta que aquest servei li retorna en el format que retorna GICAR l’usuari autenticat. &ndash;&gt; Estalvi a nivell de desenvolupament per part del departament.</p></li>
</ul>

<p>Aquesta solució es pot configurar de cara a que l&rsquo;autenticació sigui només contra Vàlid o per a que deixi elegir als usuaris entre GICAR i Vàlid.</p>

<h2 id="funcionament-de-la-solució">Funcionament de la solució:</h2>

<p>A continuació es presenta la vista global de com funciona aquesta modalitat d&rsquo;integració:</p>

<p>L’experiència d’usuari amb aquest contenidor seria la següent:</p>

<ul>
<li>L’usuari accediria a un path protegit de l’aplicació, se li presenta a l’usuari i formulari de login amb les opcions d’accedir

<ul>
<li>Via Vàlid(idcat mòbil o certificat)</li>
<li>Via GICAR</li>
</ul></li>
</ul>

<p><img src="/related/gicar/valid5.png" alt="Integració amb GICAR" /></p>

<ul>
<li>Si l’usuari selecciona via GICAR, salta la protecció GICAR actual de SiteMinder.</li>
</ul>

<p><img src="/related/gicar/valid2.png" alt="Integració amb GICAR" /></p>

<ul>
<li>Si l’usuari selecciona via Vàlid:

<ul>
<li>el formulari redireccionarà a Vàlid.</li>
<li>L’usuari s’autenticarà en Vàlid</li>
<li>introduiria el NIF i mòbil en la pantalla del Valid</li>
</ul></li>
</ul>

<p><img src="/related/gicar/valid3.png" alt="Integració amb GICAR" /></p>

<ul>
<li>I després posaria el SMS rebut al mòbil:</li>
</ul>

<p><img src="/related/gicar/valid4.png" alt="Integració amb GICAR" /></p>

<ul>
<li><p>Vàlid retornarà la petició al domini de l’aplicació</p></li>

<li><p>El contenidor recollirà el SAMLResponse i generarà les headers de GICAR  que esperen les aplicacions. Per tant en aquest punt tant si l’autenticació s’hagués fet via GICAR com via Vàlid l’aplicació sempre rebria la mateixa capçalera GICAR_ID amb el DNI de l’usuari autenticat, i la capçalera GICAR, per tant això assegura compatibilitat amb totes les aplicacions actuals.</p></li>
</ul>

<h2 id="implementació-tècnica-de-la-solució">Implementació tècnica de la solució:</h2>

<p>Per a implementar tècnicament la solució el més senzill seguir els passos exposats a l&rsquo;apartat al següent <a href="/gicar-tecniques-autenticacio-2021/auth-saml2-1-agent_shibboleth/">enllaç</a></p>

<p>Un cop es disposa el frontal de l&rsquo;aplicació integrat amb l&rsquo;agent de Shibboleth es pot configurar aquest agent de Shibboleth (al cloud, via contenidor, o on premise) de cara a que faci una de les següents dues opcions:</p>

<ul>
<li>Delegui l&rsquo;autenticació a GICAR o Vàlid i que l&rsquo;usuari pugui escollir quin sistema d&rsquo;autenticació vol utilitzar.</li>
<li>Delegar directament l&rsquo;autenticació a Vàlid.</li>
</ul>

<p>El proveïdor d&rsquo;aplicacions haurà de contactar amb la OTGICAR de cara a que li transmeti quines són exactament les configuracions que caldran per a fer funcionar aquesta solució.</p>


					

					
				</div>	

			</article>	


	</section>	

		<div class="fons_footer ">
		<footer class="container center-block shadowBox2">
			<div class="shadow2"></div>
			<div class="row footer_tab_ord">

				<div class="footer_tab_bot col-sm-12">
					<div class="avis_legal">

						<div id="fAvisLegal">
							<div>
								<div class="hidden-xs">
									<a href="https://www.gencat.cat"> <img
										src="/img/logo_generalitat_gris.png_679097835.png"
										width="101" height="27" alt="www.gencat.cat"
										/></a>
									<p>
										<a title="Avis legal" href="https://web.gencat.cat/ca/menu-ajuda/ajuda/avis_legal/" target="_self">Avís legal</a>: La &copy; Generalitat de Catalunya permet la reutilització dels continguts i de les dades sempre que se citi la font i la data d'actualització, que no es desnaturalitzi la informació i que no es contradigui amb una llicència específica.
									</p>
								</div>
								<div class="visible-xs avis_legal">
									<p>
										<a title="Avis legal" href="https://web.gencat.cat/ca/menu-ajuda/ajuda/avis_legal/" target="_self">Avís legal</a>: La &copy; Generalitat de Catalunya permet la reutilització dels continguts i de les dades sempre que se citi la font i la data d'actualització, que no es desnaturalitzi la informació i que no es contradigui amb una llicència específica.
									</p>
								</div>
								
								<div class="fi_peu visible-xs">
									<a title="www.gencat.cat" href="https://www.gencat.cat"> <img
										src="/img/logo_generalitat_gris.png_679097835.png"
										width="101" height="27" 
										alt="www.gencat.cat" /></a> <a class="torna_amunt pull-right"
										href=" javascript:tornarAmunt();" title="Torna amunt">
										<p>Torna amunt</p>
									</a>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</footer>
	</div>

<script src="/js/master.min.js" type="text/javascript"></script>
<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.min.js"></script>
<script src="/js/custom.js" type="text/javascript"></script>



<script type="text/javascript">

if(location.hostname!=="localhost"){

	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', "UA-59408075-1", 'auto');
	ga('send', 'pageview', {
	  	'page': location.pathname + location.search  + location.hash
	  }
	);

}

</script>




</body>
</html>
