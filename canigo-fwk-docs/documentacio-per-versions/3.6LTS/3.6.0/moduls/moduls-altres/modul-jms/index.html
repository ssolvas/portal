<!DOCTYPE html>
<html xml:lang="ca-ES" lang="ca-ES" xmlns="http://www.w3.org/1999/xhtml">
<head>

	<title>Cues JMS</title>
		<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link rel="shortcut icon" type="image/x-icon" href="/img/favicon.ico" />
	<link href="/css/master.min.css" rel="stylesheet" type="text/css" />
	<link href="/css/canigo.css" rel="stylesheet" type="text/css" />
	<script src="/js/jquery.min.js" type="text/javascript"></script>

	<script>
		document.write("<meta name=\"titol\" content=\"Cues JMS\" />");
		document.write("<meta name=\"description\" content=\"Missatgeria estándard JMS\" />");
	</script>

	

</head>
<body class="single">
	<div class="contenidor unfixed">

				

		<header class="fons_header navbar navbar-default z-index-menu">
			<div class="container" role="menu">
				<div class="row clearfix menuNav">
					<div class="col-md-3 col-xs-3 column visible-xs coloca ">
						<button type="button" onclick="amunt();" title="Menu"
							class="navbar-toggle pull-left" data-toggle="collapse"
							data-target=".navbar-collapse">
							<span class="sr-only">Toggle navigation</span> <span
								class="icon-bar"></span> <span class="icon-bar"></span> <span
								class="icon-bar"></span>
						</button>
					</div>

					<div class="col-md-3 col-xs-6 col-offset-2 column visible-xs titol-mobil">
						
						<span class="white titol-mobil-destacat">canigo.ctti</span><span class="white">.gencat.cat</span>
					</div>

					<div class="col-md-3 col-xs-3 column visible-xs coloca1">
						<button onclick="amunt();" type="button" title="Cerca"
							class="ico_cerca " data-toggle="collapse" data-target=".dos">
						</button>
					</div>

				</div>

				<div class="collapse dos">
					<div class="shadowBox">
						<form class="navbar-form navbar-left primer" action="/cercador/" method="get"
 						onsubmit="location.href=this.action+'?q='+this.cerca_cap.value; return false;">
							<div class="form-group">
								<input type="search" class="form-control" name="q" id="cerca_cap"
									title="Cerca"
									placeholder="Cerca" />
								<button type="button" title="Neteja" class="btn btn-default"></button>
								<input type="submit" class="ocult" name="Cerca" value="Cerca" />
							</div>
						</form>
					</div>
				</div>	

				<nav class="collapse navbar-collapse navbar-ex1-collapse ">
				
					<div class="row">
						<div class="col-md-6 col-sm-4 column">
							<a class="img-responsive logo" title="Generalitat de Catalunya"
								href="https://ctti.gencat.cat/">gencat.cat</a>
							<button class="menu_tancar visible-xs collapsed"
								data-target=".navbar-collapse" data-toggle="collapse"
								title="Tancar"></button>
						</div>

						<div class="col-md-6 col-sm-8 column hidden-xs hidden-mg">
							<form class="navbar-form cercador_vermell hidden-xs pull-right" action="/cercador/"  method="get" onsubmit="location.href=this.action+'?q='+this.cerca2.value; return false;">
								<div class="form-group">
									<label class="hidden" for="cerca2">Cerca</label>
									<input id="cerca2" class="form-control" type="search" 
									placeholder="Cerca" name="q" title="Cerca">
									<input class="btn btn-default" type="submit" title="Cerca" value="">
								</div>
							</form>

							

						</div>

					</div>
					<div class="col-xs-12 hidden-xs" id="nomPortal">
                    	<span class="titol-cap-nou">Centre de Telecomunicacions i Tecnologies de la Informació</span>
                    </div>					
					<ul class="nav navbar-nav">

			        	

						<li>
							<a class="dropdown-toggle" href='/' data-toggle='_dropdown'>Inici</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/arqctti' data-toggle='_dropdown'>Arquitectura CTTI</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/blog' data-toggle='_dropdown'>Blog</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/cloud' data-toggle='_dropdown'>Cloud</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/canigo' data-toggle='_dropdown'>Canigó</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/sic' data-toggle='_dropdown'>SIC</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/sgde' data-toggle='_dropdown'>SGDE</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/gicar' data-toggle='_dropdown'>GICAR</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/cs' data-toggle='_dropdown'>Centres de Suport</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/dadesref' data-toggle='_dropdown'>Gestió Tècnica de Dades</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/eventhub' data-toggle='_dropdown'>EventHub</a>
						</li>

						

					</ul>

				</nav>
			</div>
		</header>



	</div>

	<section class="border-start">

						
			

			<article class="bgGrey">
				<div class="container">
					<div class="row">
						<div class="capcelera_basica col-sm-12">
							<div class="capcelera_basica_cont">
								<ol class="breadcrumb filariana hidden-xs">
									<li>
										<a href="/">Inici</a>
									</li>
									<li class="breadcrumbs2">
									
										<a href="/canigo-fwk-docs">
											




























	
	
	
	
	
	  
	  
	
	  
	  
	  	
	  	
	  	<a href='https://canigo.ctti.gencat.cat/canigo-fwk-docs/'>canigo fwk docs</a>
	  	
	  
	
	  
	  
	  	
	  	
	  		<li>
	  	
	  	<a href='https://canigo.ctti.gencat.cat/canigo-fwk-docs/documentacio-per-versions/'>documentacio per versions</a>
	  	
	  		</li>
	  	
	  
	
	  
	  
	  	
	  	
	  		<li>
	  	
	  	<a href='https://canigo.ctti.gencat.cat/canigo-fwk-docs/documentacio-per-versions/3.6LTS/'>3.6LTS</a>
	  	
	  		</li>
	  	
	  
	
	  
	  
	  	
	  	
	  		<li>
	  	
	  	<a href='https://canigo.ctti.gencat.cat/canigo-fwk-docs/documentacio-per-versions/3.6LTS/3.6.0/'>3.6.0</a>
	  	
	  		</li>
	  	
	  
	
	  
	  
	  	
	  	
	  		<li>
	  	
	  	<a href='https://canigo.ctti.gencat.cat/canigo-fwk-docs/documentacio-per-versions/3.6LTS/3.6.0/moduls/'>moduls</a>
	  	
	  		</li>
	  	
	  
	
	  
	  
	  	
	  	
	  		<li>
	  	
	  	<a href='https://canigo.ctti.gencat.cat/canigo-fwk-docs/documentacio-per-versions/3.6LTS/3.6.0/moduls/moduls-altres/'>moduls altres</a>
	  	
	  		</li>
	  	
	  
	
	  
	  
	  	
	  	
	  		<li>
	  	
	  	<a href='https://canigo.ctti.gencat.cat/canigo-fwk-docs/documentacio-per-versions/3.6LTS/3.6.0/moduls/moduls-altres/modul-jms/'>modul jms</a>
	  	
	  		</li>
	  	
	  
	
	  
	  
	


										</a>
										




























































































									
									</li>

								</ol>

								<h1 class="capcelera_flotant pull-left" data-txt=".title">
									

										
											




	Cues JMS


										

									
								</h1>

								

								
								

								

								

							</div>
						</div>

					</div>
				</div>
			</article>

			


		   <div class="padding-xs container">
	    	
	    	   <i><b>Darrera actualització:</b></i> 01-11-2021
	        
           </div>
           
			<article class="padding-xs padding-sm padding-md contingut">				
				<div class="container">
 		
					
				

	


					

						

<h2 id="propòsit">Propòsit</h2>

<p>En aquest apartat s&rsquo;explica de forma senzilla la infraestructura de missatgeria estándard JMS (Java Messaging Service) de J2EE. Aquest estàndar defineix dues modalitats:</p>

<ol>
<li>Producció de missatges</li>
<li>Consum de missatges, que pot ser asíncron.</li>
</ol>

<p>El consum de missatges assíncrons a l&rsquo;estàndar J2EE es realitza mitjançant &ldquo;Message-Driven Beans&rdquo;.</p>

<p>Canigó no incorpora cap llibreria addicional a les ja aportades per Spring per lo que aquest apartat estará enfocat com a guia per a simplificar la publicació i consum de missatge.</p>

<h2 id="documents-i-fonts-de-referència">Documents i Fonts de Referència</h2>

<table>
<thead>
<tr>
<th>Referència</th>
<th>URL</th>
</tr>
</thead>

<tbody>
<tr>
<td>Spring JMS</td>
<td><a href="https://docs.spring.io/spring-framework/docs/5.3.9/reference/html/integration.html#jms">https://docs.spring.io/spring-framework/docs/5.3.9/reference/html/integration.html#jms</a></td>
</tr>
</tbody>
</table>

<h2 id="glossari">Glossari</h2>

<p><strong>JMS</strong></p>

<p>JMS o Java Message Service és un estàndard de missatgeria que permet als components de les aplicacions basades en la plataforma J2EE, crear, enviar, rebre i llegir missatges de manera sincrona i asincrona.</p>

<p><strong>ConnectionFactory</strong></p>

<p>Factoria encarregada de crear una connexió al proveidor del sistema de missatges.</p>

<p><strong>Destination</strong></p>

<p>Punts de destí dels missatges que s&rsquo;envien.</p>

<h2 id="descripció-detallada">Descripció detallada</h2>

<h3 id="missatgeria-publicació-subscripció">Missatgeria Publicació/Subscripció</h3>

<p>La missatgeria de publicació/subscripció permet a una aplicació enviar missatges a una o múltiples aplicacions. Aquestes aplicacions envien i reben missatges subscrivint-se a un servidor de missatges a una cua o tòpic determinat.</p>

<p>Hi ha dos tipus de missatge depenent de com es consumeixen:</p>

<ul>
<li>Queue: en el cas d&rsquo;un missatge enviat a una cua, encara que hi hagi varis subscriptors a aquests missatges, únicament es processarà una única vegada pel primer subscriptor que estigui lliure.</li>
<li>Topic: en el cas d&rsquo;un missatge enviat a un tòpic, tots els subscriptors a aquests missatges els processaran.</li>
</ul>

<p>Els consumidors d&rsquo;un missatge poden ser síncrons o asíncrons. En general, els consumidors asíncrons escalen millor i tenen un rendiment superior.</p>

<p>Per aplicacions que s&rsquo;executen al costat servidor, gairebé sempre sempre s&rsquo;utilitzaran consumidors asíncrons. Concretament per aplicacions J2ee es fa mitjançant Message-Driven Beans (MDB&rsquo;s) que són EJB&rsquo;s configurats per escoltar i subscriures a cues o tòpics del servidor d&rsquo;aplicacions.</p>

<p>A continuació es destaquen alguns paràmetres de configuració dels missatges JMS que cal tenir en compte en el desenvolupament d&rsquo;aplicacions que publiquin o consumeixin aquests tipus de missatges.</p>

<h3 id="persistència-del-missatge">Persistència del missatge</h3>

<p>Els missatges JMS poden ser especificats com a persistents o no-persistents.</p>

<ul>
<li>Un missatge persistent garanteix la seva entrega un i només un cop. El missatge no pot ser perdut degut a una fallida del proveïdor JMS, i no pot ser entregat dos cops. No es considerat enviat el missatge fins que no ha estat persistit (a un fitxer ó a una base de dades).</li>
<li>Un missatge no-persistent no és emmagatzemat. Està garantit que sigui entregat com a molt un cop, però si hi ha una fallida del proveïdor JMS el missatge pot ser perdut.</li>
</ul>

<p>Els missatges persistents tenen pitjor rendiment degut al pas addicional d&rsquo;haver-se d&rsquo;escriure en disc o a base de dades. Només es recomana utilitzar missatges persistents pels casos d&rsquo;ús crítics, on no es pot permetre la pèrdua del missatge (p.ex. una trasacció bancària, &hellip;).</p>

<h3 id="destinacions-distribuïdes">Destinacions distribuïdes</h3>

<p>Una destinació distribuïda és un conjunt de destinacions que són accessibles com a una única destinació lògica al client. Disposen d&rsquo;una sola adreça JNDI, i els membres d&rsquo;aquest conjunt normalment són distribuïts pels membres d&rsquo;un cluster, on cada destinació pertany a un servidor JMS separat.</p>

<p>Les aplicacions que usen destinacions distribuïdes tenen més disponibilitat respecte a les tradicionals, ja que els servidor (Weblogic) proporciona balanceig de càrrega i tolerància a fallades pels membres d&rsquo;una destinació distribuïda en un cluster.</p>

<p>Per tant, es recomana l&rsquo;ús de destinacions distribuïdes sempre que les aplicacions publicadores/consumidores es desplegin en un cluster de Weblogic.</p>

<h2 id="instal-lació-i-configuració">Instal.lació i Configuració</h2>

<h3 id="instal-lació">Instal.lació</h3>

<p>Per tal d&rsquo;instal- lar Quartz es necessari afegir manualment en el pom.xml de l&rsquo;aplicació la següent dependència:</p>

<pre><code>&lt;org.opensymphony.quartz.version&gt;2.2.1&lt;/org.opensymphony.quartz.version&gt;
&lt;commons.collections.version&gt;4.0&lt;/commons.collections.version&gt;
&lt;org.springframework.version&gt;5.3.9&lt;/org.springframework.version&gt;

&lt;dependency&gt;
    &lt;groupId&gt;org.springframework&lt;/groupId&gt;
    &lt;artifactId&gt;org.springframework.jms&lt;/artifactId&gt;
    &lt;version&gt;$org.springframework.version}&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;javax.jms&lt;/groupId&gt;
    &lt;artifactId&gt;com.springsource.javax.jms&lt;/artifactId&gt;
    &lt;version&gt;1.1.0&lt;/version&gt;
&lt;/dependency&gt;
&lt;!-- Active MQ --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.apache.activemq&lt;/groupId&gt;
    &lt;artifactId&gt;com.springsource.org.apache.activemq&lt;/artifactId&gt;
    &lt;version&gt;5.3.0&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.apache.xbean&lt;/groupId&gt;
    &lt;artifactId&gt;com.springsource.org.apache.xbean.spring&lt;/artifactId&gt;
    &lt;version&gt;3.6.0&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.apache.geronimo.specs&lt;/groupId&gt;
    &lt;artifactId&gt;com.springsource.javax.management.j2ee&lt;/artifactId&gt;
    &lt;version&gt;1.0.1&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>

<h3 id="configuració">Configuració</h3>

<p>La configuració del servei de cues el podriem dividir en els següents punts:</p>

<ul>
<li>Configuració de la infraestructura</li>
<li>Configuració del productor</li>
<li>Configuració del consumidor</li>
<li>Externalització de les propietats d&rsquo;aquests beans</li>
</ul>

<p>Ubicació: <PROJECT_ROOT>/src/main/resources/spring/jms-config.xml</p>

<p>Configuració dels arxius de propietats</p>

<p>Ubicació: <PROJECT_ROOT>/src/main/resources/config/props/jms.properties</p>

<p>Dins d&rsquo;aquest arxiu romandrien les propietats per a la gestió de la invocació:</p>

<p>Exemple d&rsquo;arxiu de propietats:</p>

<pre><code>*.jms.physicalNameDestination=cat.gencat.cttit.jms.test
*.jms.acknowledge=auto
*.jms.uri=tcp://localhost:0
``


## Utilització del Mòdul

En aquest exemple es configurarà:

* Arxiu de configuració de Spring per a la càrrega de beans implicats en l'enviament i consum de missatges JMS.
* Arxiu de propietats de configuració.
* Productor de missatges.
* Listener/consumidor de missatges.
* Classe de Test per certificar el se funcionament.

**jms-config.xml**

</code></pre>

<p>&lt;?xml version=&ldquo;1.0&rdquo; encoding=&ldquo;UTF-8&rdquo;?&gt;
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:jms="http://www.springframework.org/schema/jms"
       xmlns:amq="http://activemq.apache.org/schema/core"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans.xsd
                           http://www.springframework.org/schema/context
                           http://www.springframework.org/schema/context/spring-context.xsd
                           http://www.springframework.org/schema/jms
                           http://www.springframework.org/schema/jms/spring-jms.xsd
                           http://activemq.apache.org/schema/core
                           http://activemq.apache.org/schema/core/activemq-core.xsd"></p>

<pre><code>&lt;context:component-scan base-package=&quot;cat.gencat.ctti.testing.jms&quot; /&gt;

&lt;!--  ActiveMQ Broker Embegut --&gt;
&lt;amq:broker id=&quot;broker&quot; useJmx=&quot;false&quot; persistent=&quot;false&quot;&gt;
    &lt;amq:transportConnectors&gt;
        &lt;amq:transportConnector uri=&quot;${jms.uri}&quot; /&gt;
    &lt;/amq:transportConnectors&gt;
&lt;/amq:broker&gt;

&lt;!--  ActiveMQ Destination  --&gt;
&lt;amq:queue id=&quot;destination&quot; physicalName=&quot;${jms.physicalNameDestination}&quot; /&gt;

&lt;!-- JMS ConnectionFactory al broker embegut --&gt;
&lt;amq:connectionFactory id=&quot;jmsFactory&quot; brokerURL=&quot;${jms.brokerURL}&quot; /&gt;

&lt;!-- Configuració del productor --&gt;
&lt;bean id=&quot;jmsProducerConnectionFactory&quot;
      class=&quot;org.springframework.jms.connection.SingleConnectionFactory&quot;
      depends-on=&quot;broker&quot;
      p:targetConnectionFactory-ref=&quot;jmsFactory&quot; /&gt;

&lt;bean id=&quot;jmsProducerTemplate&quot; class=&quot;org.springframework.jms.core.JmsTemplate&quot;
      p:connectionFactory-ref=&quot;jmsProducerConnectionFactory&quot;
      p:defaultDestination-ref=&quot;destination&quot; /&gt;

&lt;!-- Configuració del consumidor --&gt;
&lt;bean id=&quot;jmsConsumerConnectionFactory&quot;
      class=&quot;org.springframework.jms.connection.SingleConnectionFactory&quot;
      depends-on=&quot;broker&quot;
      p:targetConnectionFactory-ref=&quot;jmsFactory&quot; /&gt;

&lt;jms:listener-container container-type=&quot;default&quot;
                        connection-factory=&quot;jmsConsumerConnectionFactory&quot;
                        acknowledge=&quot;${jms.acknowledge}&quot;&gt;
    &lt;jms:listener destination=&quot;org.springbyexample.jms.test&quot; ref=&quot;jmsMessageListener&quot; /&gt;
&lt;/jms:listener-container&gt;

&lt;!-- Contador per al consumidor i la clase de test per verificar el número de missatges enviats --&gt;
&lt;bean id=&quot;counter&quot; class=&quot;java.util.concurrent.atomic.AtomicInteger&quot; /&gt;
</code></pre>

<p></beans></p>

<pre><code>
&lt;div class=&quot;message information&quot;&gt;
En aquest cas s'ha fet servir un servidor ActiveMQ embegut que Spring s'encarrega de aixecar. En el cas d'apuntar a un servidor remot, s'hauria d'eliminar les referències a aquest i apuntar al nou broker.
&lt;/div&gt;


Destacar que els beans del consumidor i productor han de'estar al package &quot;cat.gencat.ctti.testing.jms&quot; perque component-scan aixequi de manera automàtica els beans de Spring.

**jms.properties**

</code></pre>

<p>*.jms.physicalNameDestination=cat.gencat.cttit.jms.test
*.jms.acknowledge=auto
*.jms.uri=tcp://localhost:0
*.jms.brokerURL=vm://localhost</p>

<pre><code>
**JmsMessageProducer.java**

```java
@Component
public class JmsMessageProducer {

    private static final Log logger = LogFactory.getLog(JmsMessageProducer.class);

    protected static final String MESSAGE_COUNT = &quot;messageCount&quot;;

    @Autowired
    private JmsTemplate template = null;
    private int messageCount = 100;

    /**
     * Generació dels missatges
     */
    @PostConstruct
    public void generateMessages() throws JMSException {
        for (int i = 0; i &lt; messageCount; i++) {
            final int index = i;
            final String text = &quot;Message number is &quot; + i + &quot;.&quot;;

            template.send(new MessageCreator() {
                public Message createMessage(Session session) throws JMSException {
                    TextMessage message = session.createTextMessage(text);
                    message.setIntProperty(MESSAGE_COUNT, index);
                    logger.info(&quot;Sending message: &quot; + text);
                    return message;
                }
            });
        }
    }
}
</code></pre>

<p>L&rsquo;annotació PostConstruct fa que el métode generateMessage s&rsquo;executi un cop Spring instanciï/creï el bean <strong>JmsMessageProducer</strong>.</p>

<p><strong>JmsMessageListener.java</strong></p>

<pre><code class="language-java">@Component
public class JmsMessageListener implements MessageListener {

    private static final Log logger = LogFactory.getLog(JmsMessageListener.class);

    @Autowired
    private AtomicInteger counter = null;

    /**
     * Implementació de &lt;code&gt;MessageListener&lt;/code&gt;.
     */
    public void onMessage(Message message) {
        try {
            int messageCount = message.getIntProperty(JmsMessageProducer.MESSAGE_COUNT);

            if (message instanceof TextMessage) {
                TextMessage tm = (TextMessage)message;
                String msg = tm.getText();
                logger.info(&quot;Processed message '&quot; + msg + &quot;'.  value=&quot; + messageCount);
                counter.incrementAndGet();
            }
        } catch (JMSException e) {
            logger.error(e.getMessage(), e);
        }
    }

}
</code></pre>

<p>Consumim asincronament els missatges que el productor ha anat enviat a la cua.</p>

<p><strong>JmsMessageListenerTest.java</strong></p>

<pre><code class="language-java">@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {&quot;jms-config.xml&quot;})
public class JmsMessageListenerTest {

    private static final Log logger = LogFactory.getLog(JmsMessageListenerTest.class);

    @Autowired
    private AtomicInteger counter = null;

    @Test
    public void testMessage() throws Exception {
        assertNotNull(&quot;Counter is null.&quot;, counter);
        int expectedCount = 100;
        logger.info(&quot;Testing...&quot;);
        // Esperem que el listener processi tots els missatges
        Thread.sleep(2 * 1000);
        assertEquals(&quot;Message is not '&quot; + expectedCount + &quot;'.&quot;, expectedCount, counter.get());
    }

}
</code></pre>

<p>Ens assegurem que el contador ha arribat a 100, lo que asegura que el consumidor ha rebut els 100 missatges del productor.</p>


					

					
				</div>	

			</article>	


	</section>	

		<div class="fons_footer ">
		<footer class="container center-block shadowBox2">
			<div class="shadow2"></div>
			<div class="row footer_tab_ord">

				<div class="footer_tab_bot col-sm-12">
					<div class="avis_legal">

						<div id="fAvisLegal">
							<div>
								<div class="hidden-xs">
									<a href="https://www.gencat.cat"> <img
										src="/img/logo_generalitat_gris.png_679097835.png"
										width="101" height="27" alt="www.gencat.cat"
										/></a>
									<p>
										<a title="Avis legal" href="https://web.gencat.cat/ca/menu-ajuda/ajuda/avis_legal/" target="_self">Avís legal</a>: La &copy; Generalitat de Catalunya permet la reutilització dels continguts i de les dades sempre que se citi la font i la data d'actualització, que no es desnaturalitzi la informació i que no es contradigui amb una llicència específica.
									</p>
								</div>
								<div class="visible-xs avis_legal">
									<p>
										<a title="Avis legal" href="https://web.gencat.cat/ca/menu-ajuda/ajuda/avis_legal/" target="_self">Avís legal</a>: La &copy; Generalitat de Catalunya permet la reutilització dels continguts i de les dades sempre que se citi la font i la data d'actualització, que no es desnaturalitzi la informació i que no es contradigui amb una llicència específica.
									</p>
								</div>
								
								<div class="fi_peu visible-xs">
									<a title="www.gencat.cat" href="https://www.gencat.cat"> <img
										src="/img/logo_generalitat_gris.png_679097835.png"
										width="101" height="27" 
										alt="www.gencat.cat" /></a> <a class="torna_amunt pull-right"
										href=" javascript:tornarAmunt();" title="Torna amunt">
										<p>Torna amunt</p>
									</a>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</footer>
	</div>

<script src="/js/master.min.js" type="text/javascript"></script>
<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.min.js"></script>
<script src="/js/custom.js" type="text/javascript"></script>



<script type="text/javascript">

if(location.hostname!=="localhost"){

	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', "UA-59408075-1", 'auto');
	ga('send', 'pageview', {
	  	'page': location.pathname + location.search  + location.hash
	  }
	);

}

</script>




</body>
</html>
