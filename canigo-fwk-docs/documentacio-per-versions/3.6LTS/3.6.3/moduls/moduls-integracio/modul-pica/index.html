<!DOCTYPE html>
<html xml:lang="ca-ES" lang="ca-ES" xmlns="http://www.w3.org/1999/xhtml">
<head>

	<title>PICA</title>
		<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link rel="shortcut icon" type="image/x-icon" href="/img/favicon.ico" />
	<link href="/css/master.min.css" rel="stylesheet" type="text/css" />
	<link href="/css/canigo.css" rel="stylesheet" type="text/css" />
	<script src="/js/jquery.min.js" type="text/javascript"></script>

	<script>
		document.write("<meta name=\"titol\" content=\"PICA\" />");
		document.write("<meta name=\"description\" content=\"Interficie d\x27accés a la PICA (Plataforma d\x27Integració i Col.laboració Administrativa).\" />");
	</script>

	

</head>
<body class="single">
	<div class="contenidor unfixed">

				

		<header class="fons_header navbar navbar-default z-index-menu">
			<div class="container" role="menu">
				<div class="row clearfix menuNav">
					<div class="col-md-3 col-xs-3 column visible-xs coloca ">
						<button type="button" onclick="amunt();" title="Menu"
							class="navbar-toggle pull-left" data-toggle="collapse"
							data-target=".navbar-collapse">
							<span class="sr-only">Toggle navigation</span> <span
								class="icon-bar"></span> <span class="icon-bar"></span> <span
								class="icon-bar"></span>
						</button>
					</div>

					<div class="col-md-3 col-xs-6 col-offset-2 column visible-xs titol-mobil">
						
						<span class="white titol-mobil-destacat">canigo.ctti</span><span class="white">.gencat.cat</span>
					</div>

					<div class="col-md-3 col-xs-3 column visible-xs coloca1">
						<button onclick="amunt();" type="button" title="Cerca"
							class="ico_cerca " data-toggle="collapse" data-target=".dos">
						</button>
					</div>

				</div>

				<div class="collapse dos">
					<div class="shadowBox">
						<form class="navbar-form navbar-left primer" action="/cercador/" method="get"
 						onsubmit="location.href=this.action+'?q='+this.cerca_cap.value; return false;">
							<div class="form-group">
								<input type="search" class="form-control" name="q" id="cerca_cap"
									title="Cerca"
									placeholder="Cerca" />
								<button type="button" title="Neteja" class="btn btn-default"></button>
								<input type="submit" class="ocult" name="Cerca" value="Cerca" />
							</div>
						</form>
					</div>
				</div>	

				<nav class="collapse navbar-collapse navbar-ex1-collapse ">
				
					<div class="row">
						<div class="col-md-6 col-sm-4 column">
							<a class="img-responsive logo" title="Generalitat de Catalunya"
								href="https://ctti.gencat.cat/">gencat.cat</a>
							<button class="menu_tancar visible-xs collapsed"
								data-target=".navbar-collapse" data-toggle="collapse"
								title="Tancar"></button>
						</div>

						<div class="col-md-6 col-sm-8 column hidden-xs hidden-mg">
							<form class="navbar-form cercador_vermell hidden-xs pull-right" action="/cercador/"  method="get" onsubmit="location.href=this.action+'?q='+this.cerca2.value; return false;">
								<div class="form-group">
									<label class="hidden" for="cerca2">Cerca</label>
									<input id="cerca2" class="form-control" type="search" 
									placeholder="Cerca" name="q" title="Cerca">
									<input class="btn btn-default" type="submit" title="Cerca" value="">
								</div>
							</form>

							

						</div>

					</div>
					<div class="col-xs-12 hidden-xs" id="nomPortal">
                    	<span class="titol-cap-nou">Centre de Telecomunicacions i Tecnologies de la Informació</span>
                    </div>					
					<ul class="nav navbar-nav">

			        	

						<li>
							<a class="dropdown-toggle" href='/' data-toggle='_dropdown'>Inici</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/arqctti' data-toggle='_dropdown'>Arquitectura CTTI</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/blog' data-toggle='_dropdown'>Blog</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/cloud' data-toggle='_dropdown'>Cloud</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/canigo' data-toggle='_dropdown'>Canigó</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/sic' data-toggle='_dropdown'>SIC</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/sgde' data-toggle='_dropdown'>SGDE</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/gicar' data-toggle='_dropdown'>GICAR</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/cs' data-toggle='_dropdown'>Centres de Suport</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/dadesref' data-toggle='_dropdown'>Gestió Tècnica de Dades</a>
						</li>

						

						<li>
							<a class="dropdown-toggle" href='/eventhub' data-toggle='_dropdown'>EventHub</a>
						</li>

						

					</ul>

				</nav>
			</div>
		</header>



	</div>

	<section class="border-start">

						
			

			<article class="bgGrey">
				<div class="container">
					<div class="row">
						<div class="capcelera_basica col-sm-12">
							<div class="capcelera_basica_cont">
								<ol class="breadcrumb filariana hidden-xs">
									<li>
										<a href="/">Inici</a>
									</li>
									<li class="breadcrumbs2">
									
										<a href="/canigo-fwk-docs">
											




























	
	
	
	
	
	  
	  
	
	  
	  
	  	
	  	
	  	<a href='https://canigo.ctti.gencat.cat/canigo-fwk-docs/'>canigo fwk docs</a>
	  	
	  
	
	  
	  
	  	
	  	
	  		<li>
	  	
	  	<a href='https://canigo.ctti.gencat.cat/canigo-fwk-docs/documentacio-per-versions/'>documentacio per versions</a>
	  	
	  		</li>
	  	
	  
	
	  
	  
	  	
	  	
	  		<li>
	  	
	  	<a href='https://canigo.ctti.gencat.cat/canigo-fwk-docs/documentacio-per-versions/3.6LTS/'>3.6LTS</a>
	  	
	  		</li>
	  	
	  
	
	  
	  
	  	
	  	
	  		<li>
	  	
	  	<a href='https://canigo.ctti.gencat.cat/canigo-fwk-docs/documentacio-per-versions/3.6LTS/3.6.3/'>3.6.3</a>
	  	
	  		</li>
	  	
	  
	
	  
	  
	  	
	  	
	  		<li>
	  	
	  	<a href='https://canigo.ctti.gencat.cat/canigo-fwk-docs/documentacio-per-versions/3.6LTS/3.6.3/moduls/'>moduls</a>
	  	
	  		</li>
	  	
	  
	
	  
	  
	  	
	  	
	  		<li>
	  	
	  	<a href='https://canigo.ctti.gencat.cat/canigo-fwk-docs/documentacio-per-versions/3.6LTS/3.6.3/moduls/moduls-integracio/'>moduls integracio</a>
	  	
	  		</li>
	  	
	  
	
	  
	  
	  	
	  	
	  		<li>
	  	
	  	<a href='https://canigo.ctti.gencat.cat/canigo-fwk-docs/documentacio-per-versions/3.6LTS/3.6.3/moduls/moduls-integracio/modul-pica/'>modul pica</a>
	  	
	  		</li>
	  	
	  
	
	  
	  
	


										</a>
										




























































































									
									</li>

								</ol>

								<h1 class="capcelera_flotant pull-left" data-txt=".title">
									

										
											




	PICA


										

									
								</h1>

								

								
								

								

								

							</div>
						</div>

					</div>
				</div>
			</article>

			


		   <div class="padding-xs container">
	    	
	    	   <i><b>Darrera actualització:</b></i> 27-12-2021
	        
           </div>
           
			<article class="padding-xs padding-sm padding-md contingut">				
				<div class="container">
 		
					
				

	


					

						

<h2 id="propòsit">Propòsit</h2>

<p>El propòsit del connector és proporcionar una interfície java per accedir a la PICA (Plataforma d&rsquo;Integració i Col.laboració Administrativa).</p>

<p>El connector amb la PICA disposa de dos tipus de comunicació, un d&rsquo;ells a través de web service síncron, i l&rsquo;altre, mitjançant web service asíncron.</p>

<h2 id="instal-lació-i-configuració">Instal.lació i Configuració</h2>

<h3 id="instal-lació">Instal.lació</h3>

<p>Per tal d&rsquo;instal-lar el mòdul de PICA es pot incloure automàticament a través de l&rsquo;eina de suport al desenvolupament o bé afegir manualment en el pom.xml de l&rsquo;aplicació la següent dependència:</p>

<pre><code class="language-xml">&lt;dependency&gt;
          &lt;groupId&gt;cat.gencat.ctti&lt;/groupId&gt;
          &lt;artifactId&gt;canigo.integration.pica&lt;/artifactId&gt;
          &lt;version&gt;${canigo.integration.pica.version}&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>

<p>A la <a href="/canigo-fwk-docs/documentacio-per-versions/3.6LTS/3.6.3/moduls/compatibilitat-per-modul/">Matriu de Compatibilitats 3.6</a> es pot comprovar la versió del mòdul compatible amb la versió de Canigó utilitzada.</p>

<h3 id="dependències">Dependències</h3>

<p>El mòdul de PICA utilitza el connector de la PICA, podeu trobar les dependències d&rsquo;aquest connector a:</p>

<p><a href="http://transversals.ctti.intranet.gencat.cat/related/pica/integracio/lib.zip">http://transversals.ctti.intranet.gencat.cat/related/pica/integracio/lib.zip</a></p>

<p>És necessari revisar les dependències a on es vagi a utilitzar el mòdul de PICA perquè no tinguin conflictes amb les dependències del connector, i si és el cas, excloure les que siguin necessàries</p>

<h3 id="configuració">Configuració</h3>

<p>La configuració es realitza automàticament a partir de la eina de suport al desenvolupament.</p>

<p>Son necessaris els següents arxius de configuració:</p>

<ul>
<li>pica.properties</li>
<li>pica.signature.properties</li>
<li>client.axis2.xml</li>
<li>modules.list</li>
<li>rampart-1.3.mar</li>
<li>certificats.jks</li>
</ul>

<p>Ubicació: <PROJECT_ROOT>/src/main/resources/config/props/pica.properties</p>

<table>
<thead>
<tr>
<th>Propietat</th>
<th>Requerit</th>
<th>Descripció</th>
</tr>
</thead>

<tbody>
<tr>
<td>*.pica.modes.passwordType</td>
<td>No</td>
<td>Tipus de password per a la PICA. Per defecte: PasswordText</td>
</tr>

<tr>
<td>*.pica.requirer.signatureFile</td>
<td>Sí</td>
<td>Arxiu de configuració de la seguretat</td>
</tr>

<tr>
<td>*.pica.requirer.petitionerId</td>
<td>Sí</td>
<td>Identificador del solicitant</td>
</tr>

<tr>
<td>*.pica.requirer.transmitionId</td>
<td>Sí</td>
<td>Identificador de la transmissió</td>
</tr>

<tr>
<td>*.pica.requirer.petitionerName</td>
<td>Sí</td>
<td>Nom del peticionari</td>
</tr>

<tr>
<td>*.pica.requirer.user</td>
<td>Sí</td>
<td>Usuari que vol consumir un producte/modalitat de la PICA</td>
</tr>

<tr>
<td>*.pica.requirer.password</td>
<td>Sí</td>
<td>Password de l&rsquo;usuari que vol consumir un producte/modalitat de la PICA</td>
</tr>

<tr>
<td>*.pica.axisdefinition.location</td>
<td>Sí</td>
<td>Localització de l&rsquo;arxiu d&rsquo;axisdefinition</td>
</tr>

<tr>
<td>*.pica.trustStore.location</td>
<td>No</td>
<td>Localització de l&rsquo;arxiu de certificats per a la configuració SSL</td>
</tr>

<tr>
<td>*.pica.trustStore.type</td>
<td>No</td>
<td>Tipus de keystore</td>
</tr>

<tr>
<td>*.pica.trustStore.password</td>
<td>No</td>
<td>Password de la keystore</td>
</tr>
</tbody>
</table>

<p>Ubicació: <PROJECT_ROOT>/src/main/resources/axis2client/conf/client.axis2.xml</p>

<p>Ubicació: <PROJECT_ROOT>/src/main/resources/axis2client/conf/rampart-1.3.mar</p>

<p>Ubicació: <PROJECT_ROOT>/src/main/resources/axis2client/conf/modules.list</p>

<p>Ubicació: <PROJECT_ROOT>/src/main/resources/config/cert/certificats.jks</p>

<p>Ubicació: <PROJECT_ROOT>/src/main/resources/config/cert/pica.signature.properties</p>

<p>Ubicació: <PROJECT_ROOT>/src/main/resources/spring/app-integration-custom.xml</p>

<pre><code>Important

Si l'aplicació ha de ser desplegada en format empaquetat (.war, .ear) caldrà indicar la ubicació de la carpeta de configuració d'axis2 com a Path absolut dins el servidor on desplegarà. Aquest Path s'indicarà sobreescrivint el valor de la propietat pica.axisdefinition.location del fitxer pica.properties amb el Path absolut on s'ha deixat la carpeta d'axis2client als servidors. S'haurà de pactar la ubicació amb els responsables del CPD on desplegarà.

Exemple:
pica.properties:

    int.pica.axisdefinition.location=file:/export/AppJavaDades/int/.../axis2client/
    pre.pica.axisdefinition.location=file:/export/AppJavaDades/pre/.../axis2client/
    pro.pica.axisdefinition.location=file:/export/AppJavaDades/pro/.../axis2client/
</code></pre>

<h2 id="utilització-del-mòdul">Utilització del Mòdul</h2>

<h3 id="rest">REST</h3>

<p><strong>app-integration-custom.xml</strong></p>

<p>Aquest arxiu XML conté la configuració de Spring per al servei de PICA. En l&rsquo;exemple configurem el servei de PICA per invocar el producte/modalitat &ldquo;PADRO_MUNICIPI_RESIDENCIA&rdquo;.</p>

<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.1.xsd&quot;&gt;


    &lt;bean id=&quot;picaCanigoService&quot; parent=&quot;abstractPicaService&quot;&gt;
        &lt;property name=&quot;modalitats&quot;&gt;
            &lt;map&gt;
                &lt;entry key=&quot;PADRO_MUNICIPI_RESIDENCIA&quot;&gt;
                    &lt;bean parent=&quot;producteModalitatBase&quot;&gt;
                        &lt;property name=&quot;signat&quot; value=&quot;false&quot;/&gt;
                        &lt;property name=&quot;urlPICA&quot; value=&quot;${pica.url}&quot; /&gt;
                        &lt;property name=&quot;codCertificado&quot; value=&quot;${pica.codCertificado}&quot;/&gt;
                        &lt;property name=&quot;codProducto&quot; value=&quot;${pica.codProducto}&quot;/&gt;
                        &lt;property name=&quot;finalidad&quot; value=&quot;${pica.finalidad}&quot;/&gt;
                        &lt;property name=&quot;nifEmisor&quot; value=&quot;${pica.nifEmissor}&quot;/&gt;
                        &lt;property name=&quot;nombreEmisor&quot; value=&quot;${pica.nombreEmisor}&quot;/&gt;
                    &lt;/bean&gt;
                &lt;/entry&gt;
            &lt;/map&gt;
        &lt;/property&gt;
    &lt;/bean&gt;
&lt;/beans&gt;
</code></pre>

<div class="message warning">
<b>Propietats específiques</b>
<br><br>
Les propietats pica.url, pica.codCertificado, pica.codProducto, etc, definides en XML de configuració anterior, son propietats específiques de la modalitat o producte invocat, per lo que s'hauran d'introduir manualment a l'arxiu pica.properties per tal de que el PlaceHolderResolver de Spring pugui resoldre el valor de la propietat durant l'arranc de l'aplicació.
</div>

<p><strong>PicaAplicacioService.java</strong></p>

<p>Classe Java amb la lògica de les peticions que es realitzin, i la connectivitat amb el mòdul de la PICA.</p>

<p>En aquesta classe es pot visualiztar:</p>

<ul>
<li>Injecció del servei de PICA via annotacions (@Autowired/@Qualifier) de Spring.</li>
<li>Invocació del producte/modalitat &ldquo;PADRO_MUNICIPI_RESIDENCIA&rdquo; definit en el map de modalitats que es troba al fitxer de configuració xml de Spring.</li>
</ul>

<pre><code class="language-java">import java.io.IOException;
import java.io.StringReader;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Qualifier;
import org.springframework.context.annotation.Lazy;
import org.springframework.stereotype.Service;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;

import com.generalitat.mp.ws.CridaSincronaResponseDocument;

import cat.gencat.ctti.canigo.arch.integration.pica.IPicaServiceWrapper;
import cat.gencat.pica.api.peticio.beans.DadesEspecifiques;
import cat.gencat.pica.api.peticio.beans.Funcionari;
import cat.gencat.pica.api.peticio.beans.Titular;
import cat.gencat.pica.api.peticio.core.IPICAServiceSincron;

@Service(&quot;picaAplicacioService&quot;)
@Lazy
public class PicaAplicacioService {

    private static final Logger log = LoggerFactory.getLogger(PicaAplicacioService.class);

    @Qualifier(&quot;picaService&quot;)
    @Autowired
    private IPicaServiceWrapper serviceWrapper;
    
    private static final int TIPO_DOC_TITULAR_NIF = 2;

    public String testPica(){
        
        String message;

         try{
                IPICAServiceSincron service = serviceWrapper.getPicaWebServiceSincronInstance(&quot;PADRO_MUNICIPI_RESIDENCIA&quot;);

                Funcionari func = getFuncionari();
                Titular tit = creaTitular();

                List&lt;DadesEspecifiques&gt; datosEspecificosXML = createDadesEspecifiques();

                service.setFuncionari(func);
                service.setTitular(tit);
                service.setDadesEspecifiques(datosEspecificosXML);

                            //Identificador únic de petició
                service.crearPeticio(&quot;PROVA_OTCANIGO_&quot; + System.currentTimeMillis());

                //fer peticio
                CridaSincronaResponseDocument resp = serviceWrapper.ferPeticioAlServei(service);
                //extreure resultat
                List&lt;DadesEspecifiques&gt; resposta= serviceWrapper.extreuDadesEspecifiques(service,resp);

                Iterator&lt;DadesEspecifiques&gt; it = resposta.iterator();
                while (it.hasNext()) {
                    DadesEspecifiques object = it.next();
                    String dadesXML = object.getDadesXML();

                    // Parsejar resposta
                    parseXML(dadesXML);
                }

                message = &quot;Test correcte&quot;;

            }catch(Exception e){
                message = &quot;Test amb errors: &quot; + e.getMessage();
                log.error(e.getMessage(), e);
            }
        
        return message;

    }
    
    /**
     * Crea un objecte funcionari
     *
     * return funcionari
     **/
    private Funcionari getFuncionari() {
        Funcionari funcionari = new Funcionari();
        funcionari.setNombreFuncionario(&quot;Nom Funcionari&quot;);
        funcionari.setNifFuncionario(&quot;55555555A&quot;);
        funcionari.setEmailFuncionario(&quot;prova@gencat.com&quot;);
        return funcionari;
    }

    /**
     * Crea un objecte titular
     *
     * return titular
     **/
    private Titular creaTitular() {
        Titular tit = new Titular(  );
        tit.setTitularTipoDocumentacion(TIPO_DOC_TITULAR_NIF);
        tit.setTitularDocumentacion(&quot;NIF_TITULAR&quot;); // Es posa el NIF real
        tit.setTitularNombreCompleto(&quot;NOM_COMPLET_TITULAR&quot;); // Es posa el nom real
        return tit;
    }
    
    
        /**
         * Crea un objecte dades específiques
         *
         * return DadesEspecifiques
         **/
    private List&lt;DadesEspecifiques&gt; createDadesEspecifiques() {
        List&lt;DadesEspecifiques&gt; dadesEspecifiquesXML= new ArrayList&lt;DadesEspecifiques&gt;(  );
        StringBuffer sb = new StringBuffer( &quot;&lt;ns1:request xmlns:ns1=\&quot;http://www.gencat.net/tfn\&quot;&gt;&quot; );
        sb.append( &quot;&lt;ns1:simpleparam name=\&quot;NUMTIT\&quot;&gt;83746573&lt;/ns1:simpleparam&gt;&quot; );
        sb.append( &quot;&lt;ns1:simpleparam name=\&quot;NUMNIF\&quot;&gt;111111111H&lt;/ns1:simpleparam&gt;&quot; );
        sb.append( &quot;&lt;/ns1:request&gt;&quot; );
    
        DadesEspecifiques dades = new DadesEspecifiques(  );
        dades.setIdSolicitud( &quot;1&quot; );
        dades.setDadesXML( sb.toString(  ) );
        dadesEspecifiquesXML.add( dades );
    
        return dadesEspecifiquesXML;
    }
    
        /**
         * Parsejar la resposta deixant constància en format de traces si la crida ha finalitzat o no correctament
         *
         **/
    private void parseXML(String dadesXML) throws ParserConfigurationException, SAXException, IOException {
        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        DocumentBuilder builder = factory.newDocumentBuilder();
        InputSource inStream = new InputSource();
        boolean error = false;
    
        inStream.setCharacterStream(new StringReader(dadesXML));
        Document doc = builder.parse(inStream);
        NodeList nodes = doc.getElementsByTagName(&quot;error&quot;);
        if(nodes.getLength() == 0) {
            nodes = doc.getElementsByTagName(&quot;sol:SolicitudError&quot;);
            error = true;
        }
    
        for(int i=0; i&lt;nodes.getLength(); i++) {
            Node node = nodes.item(i);
            if(node.getNodeType() == Node.ELEMENT_NODE) {
                Element element = (Element)node;
                if(!error) {
                    log.info(dadesXML);
                } else {
                    log.info(element.getTextContent());
                }
            }
        }
    }
}
</code></pre>

<p>Cal destacar que l&rsquo;identificador de la petició ha de ser únic, per aquest motiu es concatena un prefix de text qualsevol amb el timestamp del sistema.</p>

<p>Per a més informació respecte l&rsquo;especificació tècnica i funcional podeu contactar amb l&rsquo;OT PICA.</p>

<p>En aquest exemple, els mètodes privats crearFuncionari() i crearTitular() (creats simplement per aquest test) s&rsquo;encarreguen de setejar les propietats del funcionari que fa la petició i titular sobre el que es fa la petició respectivament. El mètode també privat createDadesEspecifiques() conté una llista de les sol.licituds, en format XML, que s&rsquo;enviaran dins la petició.</p>

<p>Dins una petició (llista de dades específiques) es poden incloure diverses sol·licituds, els identificadors de les quals han de ser únics dins una mateixa petició. Si volguéssim afegir una altra sol- licitud en l&rsquo;exemple, només caldria instanciar un nou objecte DadesEspecifiques, amb IdSolicitud=&ldquo;2&rdquo;, un nou StringBuffer amb les dades i afegir-lo a la llista dadesEspecifiquesXML dins del mètode createDadesEspecifiques() de l&rsquo;exemple.</p>

<p><strong>PicaServiceController.java</strong></p>

<p>Controller que publica les operacions disponibles per a qui hagi de consumir-les</p>

<pre><code class="language-java">import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.MediaType;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import cat.gencat.plantilla32.service.PicaAplicacioService;

@RestController
@RequestMapping(&quot;/pica&quot;)
public class PicaServiceController {

    @Autowired
    PicaAplicacioService picaAplicacioService;


    @PostMapping(produces = { MediaType.APPLICATION_JSON_VALUE })
    public String testPica() throws Exception {
        return picaAplicacioService.testPica();
    }
}
</code></pre>

<h3 id="més-informació">Més informació</h3>

<p>Per a més informació sobre el connector de la PICA teniu:</p>

<p><a href="http://transversals.ctti.intranet.gencat.cat/sol-pica/integracio/">Integració amb PICA</a></p>


					

					
				</div>	

			</article>	


	</section>	

		<div class="fons_footer ">
		<footer class="container center-block shadowBox2">
			<div class="shadow2"></div>
			<div class="row footer_tab_ord">

				<div class="footer_tab_bot col-sm-12">
					<div class="avis_legal">

						<div id="fAvisLegal">
							<div>
								<div class="hidden-xs">
									<a href="https://www.gencat.cat"> <img
										src="/img/logo_generalitat_gris.png_679097835.png"
										width="101" height="27" alt="www.gencat.cat"
										/></a>
									<p>
										<a title="Avis legal" href="https://web.gencat.cat/ca/menu-ajuda/ajuda/avis_legal/" target="_self">Avís legal</a>: La &copy; Generalitat de Catalunya permet la reutilització dels continguts i de les dades sempre que se citi la font i la data d'actualització, que no es desnaturalitzi la informació i que no es contradigui amb una llicència específica.
									</p>
								</div>
								<div class="visible-xs avis_legal">
									<p>
										<a title="Avis legal" href="https://web.gencat.cat/ca/menu-ajuda/ajuda/avis_legal/" target="_self">Avís legal</a>: La &copy; Generalitat de Catalunya permet la reutilització dels continguts i de les dades sempre que se citi la font i la data d'actualització, que no es desnaturalitzi la informació i que no es contradigui amb una llicència específica.
									</p>
								</div>
								
								<div class="fi_peu visible-xs">
									<a title="www.gencat.cat" href="https://www.gencat.cat"> <img
										src="/img/logo_generalitat_gris.png_679097835.png"
										width="101" height="27" 
										alt="www.gencat.cat" /></a> <a class="torna_amunt pull-right"
										href=" javascript:tornarAmunt();" title="Torna amunt">
										<p>Torna amunt</p>
									</a>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</footer>
	</div>

<script src="/js/master.min.js" type="text/javascript"></script>
<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.min.js"></script>
<script src="/js/custom.js" type="text/javascript"></script>



<script type="text/javascript">

if(location.hostname!=="localhost"){

	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', "UA-59408075-1", 'auto');
	ga('send', 'pageview', {
	  	'page': location.pathname + location.search  + location.hash
	  }
	);

}

</script>




</body>
</html>
